<!doctype html><html lang=en><head><title>Minimum Penalty for a Shop | curiosities.dev</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo (https://gohugo.io/)"><meta name=description content="Minimum Penalty for a Shop.  leetcode.com  .  Accessed Jul 21, 2024.  Problem You are given the customer visit log of a shop represented by a zero-indexed string customers consisting only of characters N and Y. If the \(i^{th}\) character is Y, it means that customers come at the \(i^{th}\) hour, whereas N indicates that no customers come at the \(i^{th}\) hour.
If the shop closes at the \(j^{th}\) hour (\(0 \le j \le n\)), the penalty is calculated as follows:..."><link rel=stylesheet type=text/css href=/css/main.min.css><link rel=preload href=/css/all_font_awesome_v5.9.min.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=/css/all_font_awesome_v5.9.min.min.css></noscript><link rel="shortcut icon" href=/img/favicon_io/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/img/favicon_io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/img/favicon_io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/img/favicon_io/favicon-16x16.png><script async type=text/javascript src=/js/OrganizeCitations.min.js></script><script async type=text/javascript src=/js/HighlightAnchor.min.js></script><script async type=text/javascript src=/js/SummaryPageUtils.min.js></script><link rel=preload href=/css/vs.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=/css/vs.min.css></noscript><script defer type=text/javascript src=/js/highlight.min.min.js onload=addURLHighlighter();></script><script defer>const hjlsURLRegex=/https?:\/\/[^\s<]+/g
const hjlsCitationRegex=/&lt;span class=&quot;citation-ref&quot;&gt;&lt;a href=&quot;(.*)&quot;&gt;&lt;\/a&gt;&lt;\/span&gt;/g
function addURLHighlighter(){hljs.addPlugin({"after:highlight":(result)=>{result.value=result.value.replaceAll(hjlsURLRegex,"<a href='$&' target='_blank'>$&</a>");console.log(result.value);result.value=result.value.replaceAll(hjlsCitationRegex,"<span class='citation-ref'><a href='$1'></a></span>");}});hljs.highlightAll();}</script><script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body><div class=container id=main_div><form action=/search method=get id=globalSearchForm><input type=text id=q name=q title="Search Query">
<input type=submit id=submitButton value=Search></form><nav aria-label=Breadcrumb class=breadcrumb><ul><li><a href=https://www.curiosities.dev/>Home</a></li><li><a href=https://www.curiosities.dev/computer-science/>Computer Science & Software Engineering</a></li><li><a href=https://www.curiosities.dev/computer-science/programming-challenges/>Programming Challenges</a></li><li><a href=https://www.curiosities.dev/computer-science/programming-challenges/leet-code-and-others/>Leet Code Style Questions</a></li><li><a href=https://www.curiosities.dev/computer-science/programming-challenges/leet-code-and-others/strings/>Strings</a></li><li class=active><a href=https://www.curiosities.dev/computer-science/programming-challenges/leet-code-and-others/strings/minimum-penalty-for-a-shop/>Minimum Penalty for a Shop</a></li></ul></nav><section><header><h1>Minimum Penalty for a Shop</h1><p class=meta>Dated Jul 21, 2024;
last modified on Sun, 21 Jul 2024</p></header><div id=toc-then-article><aside id=toc><nav id=TableOfContents><ul><li><a href=#problem>Problem</a></li><li><a href=#solution>Solution</a></li><li><a href=#learnings>Learnings</a></li><li><a href=#references>References</a></li></ul></nav></aside><article id=main-article><div class=citation citation-icon-class="fas fa-fw fa-globe" cited-by-count is-main><cite id=leetCode2483>Minimum Penalty for a Shop<i>.</i></cite>
<a href=https://leetcode.com/problems/minimum-penalty-for-a-shop/description/ target=_blank rel=noopener><img src="https://www.google.com/s2/favicons?domain=leetcode.com" loading=lazy aria-hidden=true width=16 height=16>
<i>leetcode.com</i> <i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.
<i class="fas fa-fw fa-globe" aria-hidden=true></i>Accessed Jul 21, 2024.</div><h2 id=problem>Problem</h2><p>You are given the customer visit log of a shop represented by a
zero-indexed string <code>customers</code> consisting only of characters <code>N</code> and
<code>Y</code>. If the \(i^{th}\) character is <code>Y</code>, it means that customers come
at the \(i^{th}\) hour, whereas <code>N</code> indicates that no customers come
at the \(i^{th}\) hour.</p><p>If the shop closes at the \(j^{th}\) hour (\(0 \le j \le n\)), the
penalty is calculated as follows:</p><ul><li>For every hour when the shop is open and no customers come, the
penalty increases by \(1\).</li><li>For every hour when the shop is closed and customers come, the penalty
increases by \(1\).</li></ul><p>Return the earliest hour at which the shop must be closed to incur a
minimum penalty. Note that if the shop closes at the \(j^{th}\) hour,
it means the shop is closed at the hour \(j\).</p><h2 id=solution>Solution</h2><p>Consider the string <code>YYNY</code>. There are two parts to the penalty at each
hour:</p><table><thead><tr><th>Hour</th><th>Pre-Close Penalty</th><th>Post-Close Penalty</th><th>Penalty</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>3 <code>YYNY</code></td><td>3</td></tr><tr><td>1</td><td>0 <code>Y</code></td><td>2 <code>YNY</code></td><td>2</td></tr><tr><td>2</td><td>0 <code>YY</code></td><td>1 <code>NY</code></td><td>1</td></tr><tr><td>3</td><td>1 <code>YYN</code></td><td>1 <code>Y</code></td><td>2</td></tr><tr><td>4</td><td>1 <code>YYNY</code></td><td>0</td><td>1</td></tr></tbody></table><p>The pre-close and post-close penalties are both monotonic. At each step,
there is a penalty of \(1\) that either goes to either increasing the
pre-close penalty or decreasing the post-close penalty.</p><details><summary>Implementation</summary><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-py data-lang=py><span style=color:#00a8c8>def</span> <span style=color:#75af00>best_closing_time</span><span style=color:#111>(</span><span style=color:#111>customers</span><span style=color:#111>:</span> <span style=color:#111>str</span><span style=color:#111>)</span> <span style=color:#f92672>-&gt;</span> <span style=color:#111>int</span><span style=color:#111>:</span>
    <span style=color:#75715e># Set the initial values.</span>
    <span style=color:#111>suffix_penalty</span> <span style=color:#f92672>=</span> <span style=color:#111>sum</span><span style=color:#111>(</span><span style=color:#ae81ff>1</span> <span style=color:#00a8c8>if</span> <span style=color:#111>c</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#39;Y&#39;</span> <span style=color:#00a8c8>else</span> <span style=color:#ae81ff>0</span> <span style=color:#00a8c8>for</span> <span style=color:#111>c</span> <span style=color:#f92672>in</span> <span style=color:#111>customers</span><span style=color:#111>)</span>
    <span style=color:#111>prefix_penalty</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
    <span style=color:#111>best_hour</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
    <span style=color:#111>min_penalty</span> <span style=color:#f92672>=</span> <span style=color:#111>suffix_penalty</span> <span style=color:#f92672>+</span> <span style=color:#111>prefix_penalty</span>

    <span style=color:#75715e># Review the rest of the string and update the best value found.</span>
    <span style=color:#00a8c8>for</span> <span style=color:#111>hour</span> <span style=color:#f92672>in</span> <span style=color:#111>range</span><span style=color:#111>(</span><span style=color:#ae81ff>1</span><span style=color:#111>,</span> <span style=color:#111>len</span><span style=color:#111>(</span><span style=color:#111>customers</span><span style=color:#111>)</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#111>):</span>
        <span style=color:#00a8c8>if</span> <span style=color:#111>customers</span><span style=color:#111>[</span><span style=color:#111>hour</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#111>]</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#39;Y&#39;</span><span style=color:#111>:</span>
            <span style=color:#111>suffix_penalty</span> <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>
        <span style=color:#00a8c8>else</span><span style=color:#111>:</span>
            <span style=color:#111>prefix_penalty</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>

        <span style=color:#111>penalty</span> <span style=color:#f92672>=</span> <span style=color:#111>prefix_penalty</span> <span style=color:#f92672>+</span> <span style=color:#111>suffix_penalty</span>
        <span style=color:#00a8c8>if</span> <span style=color:#111>penalty</span> <span style=color:#f92672>&lt;</span> <span style=color:#111>min_penalty</span><span style=color:#111>:</span>
            <span style=color:#111>best_hour</span> <span style=color:#f92672>=</span> <span style=color:#111>hour</span>
            <span style=color:#111>min_penalty</span> <span style=color:#f92672>=</span> <span style=color:#111>penalty</span>

    <span style=color:#00a8c8>return</span> <span style=color:#111>best_hour</span>
</code></pre></div><p>Runtime \(\mathcal{O}(N)\). Space usage: \(\mathcal{O}(1)\).</p></details><p>I&rsquo;ve seen this pattern before in
<a href=https://www.curiosities.dev/computer-science/programming-challenges/leet-code-and-others/grids/grid_game/ target=_blank rel=noopener>Minimizing Bottom-Right Paths in a 2xN
Grid
<i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>,
where we have a initial value that we update on seeing the next item in
the collection.</p><h2 id=learnings>Learnings</h2><p><span class=citation-ref><a href=#leetCode2483></a></span>tags this problem with &ldquo;Prefix Sum&rdquo;, a class
of problems that feature the pattern \(y_i = y_{i-1} + x_i\).
<span class=tag-ref><a href=/tags/prefix-sum>#prefix-sum</a></span></p><p>We do not need to separately maintain <code>prefix_penalty</code> and
<code>suffix_penalty</code>. <span class=citation-ref><a href=#leetCode2483Editorial></a></span></p><details><summary>Implementation with single penalty value</summary><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-py data-lang=py><span style=color:#00a8c8>def</span> <span style=color:#75af00>best_closing_time</span><span style=color:#111>(</span><span style=color:#111>customers</span><span style=color:#111>:</span> <span style=color:#111>str</span><span style=color:#111>)</span> <span style=color:#f92672>-&gt;</span> <span style=color:#111>int</span><span style=color:#111>:</span>
    <span style=color:#75715e># Set the initial values. Assume that we are closed at hour 0.</span>
    <span style=color:#111>penalty</span> <span style=color:#f92672>=</span> <span style=color:#111>sum</span><span style=color:#111>(</span><span style=color:#ae81ff>1</span> <span style=color:#00a8c8>if</span> <span style=color:#111>c</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#39;Y&#39;</span> <span style=color:#00a8c8>else</span> <span style=color:#ae81ff>0</span> <span style=color:#00a8c8>for</span> <span style=color:#111>c</span> <span style=color:#f92672>in</span> <span style=color:#111>customers</span><span style=color:#111>)</span>
    <span style=color:#111>earliest_closing_hour</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
    <span style=color:#111>min_penalty</span> <span style=color:#f92672>=</span> <span style=color:#111>penalty</span>

    <span style=color:#75715e># Try closing the shop at hours 1, ..., n-1</span>
    <span style=color:#00a8c8>for</span> <span style=color:#111>latest_open_hour</span><span style=color:#111>,</span> <span style=color:#111>c</span> <span style=color:#f92672>in</span> <span style=color:#111>enumerate</span><span style=color:#111>(</span><span style=color:#111>customers</span><span style=color:#111>):</span>
        <span style=color:#75715e># If there is a customer at this hour, moving it to open hours</span>
        <span style=color:#75715e># decreases the penalty by one. If there&#39;s no customer, then we</span>
        <span style=color:#75715e># incur a penalty by having the shop open.</span>
        <span style=color:#111>penalty</span> <span style=color:#f92672>+=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#00a8c8>if</span> <span style=color:#111>c</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#39;Y&#39;</span> <span style=color:#00a8c8>else</span> <span style=color:#ae81ff>1</span>

        <span style=color:#00a8c8>if</span> <span style=color:#111>penalty</span> <span style=color:#f92672>&lt;</span> <span style=color:#111>min_penalty</span><span style=color:#111>:</span>
            <span style=color:#111>earliest_closing_hour</span> <span style=color:#f92672>=</span> <span style=color:#111>latest_open_hour</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>
            <span style=color:#111>penalty</span> <span style=color:#f92672>=</span> <span style=color:#111>min_penalty</span>

    <span style=color:#00a8c8>return</span> <span style=color:#111>earliest_closing_hour</span>
</code></pre></div></details><div class=comment-holder><div class=comment><p>From a pure refactor perspective, could I have been able to infer this?</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-py data-lang=py><span style=color:#111>prefix_penalty</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
<span style=color:#111>suffix_penalty</span> <span style=color:#f92672>=</span> <span style=color:#111>sum</span><span style=color:#111>(</span><span style=color:#ae81ff>1</span> <span style=color:#00a8c8>if</span> <span style=color:#111>c</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#39;Y&#39;</span> <span style=color:#00a8c8>else</span> <span style=color:#ae81ff>0</span> <span style=color:#00a8c8>for</span> <span style=color:#111>c</span> <span style=color:#f92672>in</span> <span style=color:#111>customers</span><span style=color:#111>)</span>
<span style=color:#111>min_penalty</span> <span style=color:#f92672>=</span> <span style=color:#111>prefix_penalty</span> <span style=color:#f92672>+</span> <span style=color:#111>suffix_penalty</span>

<span style=color:#00a8c8>for</span> <span style=color:#111>hour</span> <span style=color:#f92672>in</span> <span style=color:#111>range</span><span style=color:#111>(</span><span style=color:#ae81ff>1</span><span style=color:#111>,</span> <span style=color:#111>len</span><span style=color:#111>(</span><span style=color:#111>customers</span><span style=color:#111>)</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#111>):</span>
  <span style=color:#00a8c8>if</span> <span style=color:#111>customers</span><span style=color:#111>[</span><span style=color:#111>hour</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#111>]</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#39;Y&#39;</span><span style=color:#111>:</span> <span style=color:#111>suffix_penalty</span> <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>
  <span style=color:#00a8c8>else</span><span style=color:#111>:</span> <span style=color:#111>prefix_penalty</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
  <span style=color:#111>penalty</span> <span style=color:#f92672>=</span> <span style=color:#111>prefix_penalty</span> <span style=color:#f92672>+</span> <span style=color:#111>suffix_penalty</span>
</code></pre></div><p><code>min_penalty</code> is trivially <code>suffix_penalty</code> because <code>prefix_penalty</code> is
\(0\).</p><p>In the <code>Y</code> case, <code>penalty = prefix_penalty + suffix_penalty - 1</code>, while
in the <code>N</code> case, <code>penalty = prefix_penalty + 1 + suffix_penalty</code>.
Therefore, <code>prefix_penalty + suffix_penalty</code> can be collapsed into one
value.</p></div></div><div class=comment-holder><div class=comment><p>In the rewrite, using <code>for latest_open_hour, c in enumerate(customer)</code>
instead of <code>for hour in range(1, len(customers) + 1)</code> clarified my
thinking a lot. Another point for selecting good variable names and
using idiomatic constructs.</p></div></div><p>The initial pass over <code>customers</code> gets us the starting penalty. However,
the question asks for the earliest hour with the lowest penalty, and so
it&rsquo;s the penalty of the hours relative to each other that matters, not
the specific penalty value. <span class=citation-ref><a href=#leetCode2483Editorial></a></span></p><figure><img src=/img/computer-science/programming-challenges/leet-code-and-others/strings/min-penalty-shop/ref-point-does-not-affect-result.png alt="The reference shifts the graph up or down. However, the shape of the graph does not change. Source: leetCode2483Editorial"><figcaption><p>The reference shifts the graph up or down. However, the shape of the graph does not change. Source: leetCode2483Editorial</p></figcaption></figure><details><summary>Implementation in a single pass</summary><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-py data-lang=py><span style=color:#00a8c8>def</span> <span style=color:#75af00>best_closing_time</span><span style=color:#111>(</span><span style=color:#111>customers</span><span style=color:#111>:</span> <span style=color:#111>str</span><span style=color:#111>)</span> <span style=color:#f92672>-&gt;</span> <span style=color:#111>int</span><span style=color:#111>:</span>
    <span style=color:#75715e># Assume that we are closed at hour 0. Set zero as the reference</span>
    <span style=color:#75715e># point.</span>
    <span style=color:#111>penalty</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
    <span style=color:#111>earliest_closing_hour</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
    <span style=color:#111>min_penalty</span> <span style=color:#f92672>=</span> <span style=color:#111>penalty</span>

    <span style=color:#00a8c8>for</span> <span style=color:#111>latest_open_hour</span><span style=color:#111>,</span> <span style=color:#111>c</span> <span style=color:#f92672>in</span> <span style=color:#111>enumerate</span><span style=color:#111>(</span><span style=color:#111>customers</span><span style=color:#111>):</span>
        <span style=color:#75715e># If there is a customer at this hour, moving it to open hours</span>
        <span style=color:#75715e># decreases the penalty by one. If there&#39;s no customer, then we</span>
        <span style=color:#75715e># incur a penalty by having the shop open.</span>
        <span style=color:#111>penalty</span> <span style=color:#f92672>+=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#00a8c8>if</span> <span style=color:#111>c</span> <span style=color:#f92672>==</span> <span style=color:#d88200>&#39;Y&#39;</span> <span style=color:#00a8c8>else</span> <span style=color:#ae81ff>1</span>

        <span style=color:#00a8c8>if</span> <span style=color:#111>penalty</span> <span style=color:#f92672>&lt;</span> <span style=color:#111>min_penalty</span><span style=color:#111>:</span>
            <span style=color:#111>earliest_closing_hour</span> <span style=color:#f92672>=</span> <span style=color:#111>latest_open_hour</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>
            <span style=color:#111>min_penalty</span> <span style=color:#f92672>=</span> <span style=color:#111>penalty</span>

    <span style=color:#00a8c8>return</span> <span style=color:#111>earliest_closing_hour</span>
</code></pre></div></summary><h2 id=references>References</h2><ol><li><div class=citation citation-icon-class="fas fa-fw fa-globe" cited-by-count is-main><cite id=prefixSumWiki>Prefix sum - Wikipedia<i>.</i></cite>
<a href=https://en.wikipedia.org/wiki/Prefix_sum target=_blank rel=noopener><img src="https://www.google.com/s2/favicons?domain=en.wikipedia.org" loading=lazy aria-hidden=true width=16 height=16>
<i>en.wikipedia.org</i> <i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.
<i class="fas fa-fw fa-globe" aria-hidden=true></i>Accessed Jul 21, 2024.</div></li><li><div class=citation citation-icon-class="fas fa-fw fa-globe" cited-by-count is-main><cite id=leetCode2483Editorial>Minimum Penalty for a Shop > Editorial<i>.</i></cite>
<a href=https://leetcode.com/problems/minimum-penalty-for-a-shop/editorial/ target=_blank rel=noopener><img src="https://www.google.com/s2/favicons?domain=leetcode.com" loading=lazy aria-hidden=true width=16 height=16>
<i>leetcode.com</i> <i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.
<i class="fas fa-fw fa-globe" aria-hidden=true></i>Accessed Jul 21, 2024.</div></li></ol></article><div style=font-size:smaller><aside id=tags-holder style="margin:0 0 2%">Tags:
<a href=/tags/prefix-sum>#prefix-sum</a></aside><aside id=domains-holder style="margin:0 0 2%">Cited Domains:
<a href=/domains/en.wikipedia.org style="margin:0 2px"><img src="https://www.google.com/s2/favicons?domain=en.wikipedia.org" loading=lazy aria-hidden=true width=16 height=16>
en.wikipedia.org</a>
<a href=/domains/leetcode.com style="margin:0 2px"><img src="https://www.google.com/s2/favicons?domain=leetcode.com" loading=lazy aria-hidden=true width=16 height=16>
leetcode.com</a></aside></div></div><footer></footer></section></div><footer><a href=mailto:d.chege711@gmail.com>Email</a>
<a href=/about>About</a>
<a href=/search>Search</a></footer></body></html>