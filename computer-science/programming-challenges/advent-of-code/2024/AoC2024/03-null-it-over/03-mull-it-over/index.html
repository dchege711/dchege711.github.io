<!doctype html><html lang=en><head><title>AoC 2024 Day 03: Mull It Over | curiosities.dev</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo (https://gohugo.io/)"><meta name=description content="Data The computer appears to be trying to run a program, but its memory is corrupted. All of the instructions have been jumbled up!
It seems like the goal of the program is just to multiply some numbers. It does that with instructions like mul(X,Y) where X and Y are each 1-3 digit numbers. For instance, mul(44,46) multiplies 44 and 46 to get a result of 2024.
However, because the program&rsquo;s memory has been corrupted, there are also invalid characters that should be ignored, even if they look like a mul instruction...."><meta property="og:title" content="AoC 2024 Day 03: Mull It Over"><meta property="og:description" content="Data The computer appears to be trying to run a program, but its memory is corrupted. All of the instructions have been jumbled up!
It seems like the goal of the program is just to multiply some numbers. It does that with instructions like mul(X,Y) where X and Y are each 1-3 digit numbers. For instance, mul(44,46) multiplies 44 and 46 to get a result of 2024.
However, because the program&rsquo;s memory has been corrupted, there are also invalid characters that should be ignored, even if they look like a mul instruction...."><meta property="og:type" content="website"><meta property="og:url" content="https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/2024/AoC2024/03-null-it-over/03-mull-it-over/"><meta property="og:site_name" content="curiosities.dev"><link rel=stylesheet type=text/css href=/css/main.min.css><link rel=preload href=/css/all_font_awesome_v5.9.min.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=/css/all_font_awesome_v5.9.min.min.css></noscript><link rel="shortcut icon" href=/img/favicon_io/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/img/favicon_io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/img/favicon_io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/img/favicon_io/favicon-16x16.png><script async type=text/javascript src=/js/OrganizeCitations.min.js></script><script async type=text/javascript src=/js/HighlightAnchor.min.js></script><script async type=text/javascript src=/js/SummaryPageUtils.min.js></script><link rel=preload href=/css/vs.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=/css/vs.min.css></noscript><script defer type=text/javascript src=/js/highlight.min.min.js onload=addURLHighlighter();></script><script defer>const hjlsURLRegex=/https?:\/\/[^\s<]+/g
const hjlsCitationRegex=/&lt;span class=&quot;citation-ref&quot;&gt;&lt;a href=&quot;(.*)&quot;&gt;&lt;\/a&gt;&lt;\/span&gt;/g
function addURLHighlighter(){hljs.addPlugin({"after:highlight":(result)=>{result.value=result.value.replaceAll(hjlsURLRegex,"<a href='$&' target='_blank'>$&</a>");console.log(result.value);result.value=result.value.replaceAll(hjlsCitationRegex,"<span class='citation-ref'><a href='$1'></a></span>");}});hljs.highlightAll();}</script><script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body><div class=container id=main_div><form action=/search method=get id=globalSearchForm><input type=text id=q name=q title="Search Query">
<input type=submit id=submitButton value=Search></form><nav aria-label=Breadcrumb class=breadcrumb><ul><li><a href=https://www.curiosities.dev/>Home</a></li><li><a href=https://www.curiosities.dev/computer-science/>Computer Science & Software Engineering</a></li><li><a href=https://www.curiosities.dev/computer-science/programming-challenges/>Programming Challenges</a></li><li><a href=https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/>Advent of Code</a></li><li><a href=https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/2024/>Advent of Code 2024</a></li><li class=active><a href=https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/2024/AoC2024/03-null-it-over/03-mull-it-over/>AoC 2024 Day 03: Mull It Over</a></li></ul></nav><section><header><h1>AoC 2024 Day 03: Mull It Over</h1><p class=meta>Dated Jul 2, 2025;
last modified on Wed, 02 Jul 2025</p></header><div id=toc-then-article><aside id=toc><nav id=TableOfContents><ul><li><a href=#data>Data</a></li><li><a href=#part-one>Part One</a><ul><li><a href=#part-two>Part Two</a></li></ul></li></ul></nav></aside><article id=main-article><h2 id=data>Data</h2><p>The computer appears to be trying to run a program, but its memory is
<strong>corrupted</strong>. All of the instructions have been jumbled up!</p><p>It seems like the goal of the program is just to <strong>multiply some numbers</strong>. It
does that with instructions like <code>mul(X,Y)</code> where <code>X</code> and <code>Y</code> are each 1-3
digit numbers. For instance, <code>mul(44,46)</code> multiplies <code>44</code> and <code>46</code> to get a
result of <code>2024</code>.</p><p>However, because the program&rsquo;s memory has been corrupted, there are also invalid
characters that should be <strong>ignored</strong>, even if they look like a <code>mul</code>
instruction. Sequences like <code>mul(4*</code>, <code>mul(6,9!</code>, <code>?(12,34)</code>, or <code>mul ( 2 , 4 )</code>
do <strong>nothing</strong>.</p><p>For example, consider the following section of corrupted memory:</p><p>x<strong>mul(2,4)</strong>%&mul[3,7]!@^do_not_<strong>mul(5,5)</strong>+mul(32,64]then(<strong>mul(11,8)mul(8,5)</strong>)</p><p>Only the four highlighted sections are real <code>mul</code> instructions. Adding up the
result of each instruction produces \(2 \times 4 + 5 \times 5 + 11 \times 8 + 8
\times 5 = 161\).</p><p>To parse:</p><div id=MullItOver.Parse.cs><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cs data-lang=cs><span style=color:#00a8c8>using</span> <span style=color:#111>System.Text.RegularExpressions</span><span style=color:#111>;</span>

<span style=color:#00a8c8>namespace</span> <span style=color:#111>AoC2024</span><span style=color:#111>;</span>

<span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>partial</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>MullItOver</span>
<span style=color:#111>{</span>
    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>static</span> <span style=color:#111>IEnumerable</span><span style=color:#111>&lt;</span><span style=color:#111>ICommand</span><span style=color:#111>&gt;</span> <span style=color:#111>ParseCommands</span><span style=color:#111>(</span><span style=color:#00a8c8>string</span> <span style=color:#111>filePath</span><span style=color:#111>)</span>
    <span style=color:#111>{</span>
        <span style=color:#00a8c8>using</span> <span style=color:#111>StreamReader</span> <span style=color:#111>inputReader</span> <span style=color:#111>=</span> <span style=color:#00a8c8>new</span><span style=color:#111>(</span><span style=color:#111>filePath</span><span style=color:#111>);</span>
        <span style=color:#00a8c8>string?</span> <span style=color:#111>line</span><span style=color:#111>;</span>
        <span style=color:#00a8c8>while</span><span style=color:#111>((</span><span style=color:#111>line</span> <span style=color:#111>=</span> <span style=color:#111>inputReader</span><span style=color:#111>.</span><span style=color:#111>ReadLine</span><span style=color:#111>())</span> <span style=color:#111>!=</span> <span style=color:#00a8c8>null</span><span style=color:#111>)</span>
        <span style=color:#111>{</span>
            <span style=color:#00a8c8>var</span> <span style=color:#111>commands</span> <span style=color:#111>=</span> <span style=color:#111>InputLineRegex</span><span style=color:#111>()</span>
                <span style=color:#111>.</span><span style=color:#111>Matches</span><span style=color:#111>(</span><span style=color:#111>line</span><span style=color:#111>)</span>
                <span style=color:#111>.</span><span style=color:#111>Select</span><span style=color:#111>(</span><span style=color:#111>ParseCommand</span><span style=color:#111>);</span>
            
            <span style=color:#00a8c8>foreach</span> <span style=color:#111>(</span><span style=color:#00a8c8>var</span> <span style=color:#111>command</span> <span style=color:#00a8c8>in</span> <span style=color:#111>commands</span><span style=color:#111>)</span>
                <span style=color:#00a8c8>yield</span> <span style=color:#00a8c8>return</span> <span style=color:#111>command</span><span style=color:#111>;</span>
        <span style=color:#111>}</span>
    <span style=color:#111>}</span>

    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>static</span> <span style=color:#111>ICommand</span> <span style=color:#111>ParseCommand</span><span style=color:#111>(</span><span style=color:#111>Match</span> <span style=color:#111>m</span><span style=color:#111>)</span>
    <span style=color:#111>{</span>
        <span style=color:#00a8c8>var</span> <span style=color:#111>groups</span> <span style=color:#111>=</span> <span style=color:#111>m</span><span style=color:#111>.</span><span style=color:#111>Groups</span><span style=color:#111>;</span>

        <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>groups</span><span style=color:#111>[</span><span style=color:#d88200>&#34;do&#34;</span><span style=color:#111>].</span><span style=color:#111>Success</span><span style=color:#111>)</span>
        <span style=color:#111>{</span>
            <span style=color:#00a8c8>return</span> <span style=color:#00a8c8>new</span> <span style=color:#111>DoCommand</span><span style=color:#111>();</span>
        <span style=color:#111>}</span>
        <span style=color:#00a8c8>else</span> <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>groups</span><span style=color:#111>[</span><span style=color:#d88200>&#34;dont&#34;</span><span style=color:#111>].</span><span style=color:#111>Success</span><span style=color:#111>)</span>
        <span style=color:#111>{</span>
            <span style=color:#00a8c8>return</span> <span style=color:#00a8c8>new</span> <span style=color:#111>DontCommand</span><span style=color:#111>();</span>
        <span style=color:#111>}</span>
        <span style=color:#00a8c8>else</span> <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>groups</span><span style=color:#111>[</span><span style=color:#d88200>&#34;mul&#34;</span><span style=color:#111>].</span><span style=color:#111>Success</span><span style=color:#111>)</span>
        <span style=color:#111>{</span>
            <span style=color:#00a8c8>return</span> <span style=color:#00a8c8>new</span> <span style=color:#111>MultiplyCommand</span><span style=color:#111>(</span>
                <span style=color:#00a8c8>int</span><span style=color:#111>.</span><span style=color:#111>Parse</span><span style=color:#111>(</span><span style=color:#111>groups</span><span style=color:#111>[</span><span style=color:#d88200>&#34;num1&#34;</span><span style=color:#111>].</span><span style=color:#111>Value</span><span style=color:#111>),</span>
                <span style=color:#00a8c8>int</span><span style=color:#111>.</span><span style=color:#111>Parse</span><span style=color:#111>(</span><span style=color:#111>groups</span><span style=color:#111>[</span><span style=color:#d88200>&#34;num2&#34;</span><span style=color:#111>].</span><span style=color:#111>Value</span><span style=color:#111>));</span>
        <span style=color:#111>}</span>

        <span style=color:#00a8c8>throw</span> <span style=color:#00a8c8>new</span> <span style=color:#111>ArgumentException</span><span style=color:#111>(</span><span style=color:#d88200>$&#34;Unrecognized match found {m}&#34;</span><span style=color:#111>);</span>
    <span style=color:#111>}</span>

    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>interface</span> <span style=color:#111>ICommand</span><span style=color:#111>;</span>

    <span style=color:#00a8c8>private</span> <span style=color:#111>record</span> <span style=color:#111>MultiplyCommand</span><span style=color:#111>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>Num1</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>Num2</span><span style=color:#111>)</span> <span style=color:#111>:</span> <span style=color:#111>ICommand</span><span style=color:#111>;</span>
    <span style=color:#00a8c8>private</span> <span style=color:#111>record</span> <span style=color:#111>DoCommand</span> <span style=color:#111>:</span> <span style=color:#111>ICommand</span><span style=color:#111>;</span>
    <span style=color:#00a8c8>private</span> <span style=color:#111>record</span> <span style=color:#111>DontCommand</span> <span style=color:#111>:</span> <span style=color:#111>ICommand</span><span style=color:#111>;</span>
<span style=color:#75af00>
</span><span style=color:#75af00>    [GeneratedRegex(@&#34;(?&lt;dont&gt;don&#39;t\(\))|(?&lt;do&gt;do\(\))|(?&lt;mul&gt;mul\((?&lt;num1&gt;\d{1,3}),(?&lt;num2&gt;\d{1,3})\))&#34;)]</span>
    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>partial</span> <span style=color:#111>Regex</span> <span style=color:#111>InputLineRegex</span><span style=color:#111>();</span>
<span style=color:#111>}</span>
</code></pre></div></div><h2 id=part-one>Part One</h2><p>Scan the corrupted memory for uncorrupted <code>mul</code> instructions. <strong>What do you get
if you add up all of the results of the multiplications?</strong></p><div id=MullItOver.PartOne.cs><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cs data-lang=cs><span style=color:#00a8c8>namespace</span> <span style=color:#111>AoC2024</span><span style=color:#111>;</span>

<span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>partial</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>MullItOver</span>
<span style=color:#111>{</span>
    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>int</span> <span style=color:#111>PartOne</span><span style=color:#111>(</span><span style=color:#00a8c8>string</span> <span style=color:#111>filePath</span><span style=color:#111>)</span>
    <span style=color:#111>{</span>
        <span style=color:#00a8c8>return</span> <span style=color:#111>ParseCommands</span><span style=color:#111>(</span><span style=color:#111>filePath</span><span style=color:#111>)</span>
            <span style=color:#111>.</span><span style=color:#111>OfType</span><span style=color:#111>&lt;</span><span style=color:#111>MultiplyCommand</span><span style=color:#111>&gt;()</span>
            <span style=color:#111>.</span><span style=color:#111>Select</span><span style=color:#111>(</span><span style=color:#111>cmd</span> <span style=color:#111>=&gt;</span> <span style=color:#111>cmd</span><span style=color:#111>.</span><span style=color:#111>Num1</span> <span style=color:#111>*</span> <span style=color:#111>cmd</span><span style=color:#111>.</span><span style=color:#111>Num2</span><span style=color:#111>)</span>
            <span style=color:#111>.</span><span style=color:#111>Sum</span><span style=color:#111>();</span>
    <span style=color:#111>}</span>
<span style=color:#111>}</span>
</code></pre></div></div><h3 id=part-two>Part Two</h3><p>There are <strong>two</strong> new instructions you&rsquo;ll need to handle:</p><ul><li>The <code>do()</code> instruction <strong>enables</strong> future <code>mul</code> instructions.</li><li>The <code>don't()</code> instruction <strong>disables</strong> future <code>mul</code> instructions.</li></ul><p>Only the <strong>most recent</strong> <code>do()</code> or <code>don't()</code> instruction applies. At the
beginning of the program, <code>mul</code> instructions are <strong>enabled</strong>.</p><p>For example:</p><p>x<strong>mul(2,4)</strong>&mul[3,7]!^<strong>don&rsquo;t()</strong>_mul(5,5)+mul(32,64](mul(11,8)un<strong>do()</strong>?<strong>mul(8,5)</strong>)</p><p>The <code>mul(5,5)</code> and <code>mull(11,8)</code> instructions are <strong>disabled</strong> because there is a
<code>don't()</code> instruction before them. The other <code>mul</code> instructions function
normally, including the one at the end that gets <strong>re-enabled</strong> by a <code>do()</code>
instruction.</p><p>This time, the sum of the results is \( 2 \times 4 + 8 \times 5 = 48\).</p><p>Handle the new instructions; <strong>what do you get if you add up all of the results
of just the enabled multiplications?</strong></p><div id=MullItOver.PartTwo.cs><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cs data-lang=cs><span style=color:#00a8c8>namespace</span> <span style=color:#111>AoC2024</span><span style=color:#111>;</span>

<span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>partial</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>MullItOver</span>
<span style=color:#111>{</span>
    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>int</span> <span style=color:#111>PartTwo</span><span style=color:#111>(</span><span style=color:#00a8c8>string</span> <span style=color:#111>filePath</span><span style=color:#111>)</span>
    <span style=color:#111>{</span>
        <span style=color:#00a8c8>return</span> <span style=color:#111>ParseCommands</span><span style=color:#111>(</span><span style=color:#111>filePath</span><span style=color:#111>).</span><span style=color:#111>Aggregate</span><span style=color:#111>(</span>
            <span style=color:#00a8c8>new</span> <span style=color:#111>RunningSum</span><span style=color:#111>(</span><span style=color:#00a8c8>true</span><span style=color:#111>,</span> <span style=color:#ae81ff>0</span><span style=color:#111>),</span> 
            <span style=color:#111>(</span><span style=color:#111>res</span><span style=color:#111>,</span> <span style=color:#111>cmd</span><span style=color:#111>)</span> <span style=color:#111>=&gt;</span> <span style=color:#111>cmd</span> <span style=color:#00a8c8>switch</span> <span style=color:#111>{</span>
                <span style=color:#111>DoCommand</span> <span style=color:#111>doCmd</span> <span style=color:#111>=&gt;</span> <span style=color:#00a8c8>new</span><span style=color:#111>(</span><span style=color:#00a8c8>true</span><span style=color:#111>,</span> <span style=color:#111>res</span><span style=color:#111>.</span><span style=color:#111>Sum</span><span style=color:#111>),</span>
                <span style=color:#111>DontCommand</span> <span style=color:#111>dontCmd</span> <span style=color:#111>=&gt;</span> <span style=color:#00a8c8>new</span><span style=color:#111>(</span><span style=color:#00a8c8>false</span><span style=color:#111>,</span> <span style=color:#111>res</span><span style=color:#111>.</span><span style=color:#111>Sum</span><span style=color:#111>),</span>
                <span style=color:#111>MultiplyCommand</span> <span style=color:#111>multCmd</span> <span style=color:#111>=&gt;</span> <span style=color:#00a8c8>new</span><span style=color:#111>(</span>
                    <span style=color:#111>res</span><span style=color:#111>.</span><span style=color:#111>Enabled</span><span style=color:#111>,</span>
                    <span style=color:#111>res</span><span style=color:#111>.</span><span style=color:#111>Sum</span> <span style=color:#111>+</span> <span style=color:#111>(</span><span style=color:#111>res</span><span style=color:#111>.</span><span style=color:#111>Enabled</span> <span style=color:#111>?</span> <span style=color:#111>(</span><span style=color:#111>multCmd</span><span style=color:#111>.</span><span style=color:#111>Num1</span> <span style=color:#111>*</span> <span style=color:#111>multCmd</span><span style=color:#111>.</span><span style=color:#111>Num2</span><span style=color:#111>)</span> <span style=color:#111>:</span> <span style=color:#ae81ff>0</span><span style=color:#111>)),</span>
                <span style=color:#111>_</span> <span style=color:#111>=&gt;</span> <span style=color:#00a8c8>throw</span> <span style=color:#00a8c8>new</span> <span style=color:#111>ArgumentException</span><span style=color:#111>(</span><span style=color:#d88200>$&#34;Unrecognized type {cmd.GetType()}&#34;</span><span style=color:#111>)</span>
            <span style=color:#111>},</span>
            <span style=color:#111>res</span> <span style=color:#111>=&gt;</span> <span style=color:#111>res</span><span style=color:#111>.</span><span style=color:#111>Sum</span><span style=color:#111>);</span>
    <span style=color:#111>}</span>

    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>readonly</span> <span style=color:#111>record</span> <span style=color:#00a8c8>struct</span> <span style=color:#75af00>RunningSum</span><span style=color:#111>(</span><span style=color:#00a8c8>bool</span> <span style=color:#111>Enabled</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>Sum</span><span style=color:#111>);</span>
<span style=color:#111>}</span>
</code></pre></div></div></article><div style=font-size:smaller></div></div><footer><a href=https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/2024/AoC2024/02-red-nosed-reports/02-red-nosed-reports/>&#171; AoC 2024 Day 02: Red-Nosed Reports</a></footer></section></div><footer><a href=/about>About</a>
<a href=/search>Search</a></footer></body></html>