<!doctype html><html lang=en><head><title>AoC 2024 Day 11: Plutonian Pebbles | curiosities.dev</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo (https://gohugo.io/)"><meta name=description content="Parsing The stones are in a line, with each stone having a number engraved on it. 
namespace AoC2024; public static partial class PlutonianPebbles { public static IEnumerable<ulong> ReadStones(string filePath) { var line = File.ReadAllText(filePath).Trim(); return line.Split().Select(ulong.Parse); } }  The snippet below contains a subtle bug. The using statement disposes the StreamReader at the end of the scope . This happens before the IEnumerable<ulong> is consumed. However, because ReadLine eagerly reads the content, there is no exception thrown...."><meta property="og:title" content="AoC 2024 Day 11: Plutonian Pebbles"><meta property="og:description" content="Parsing The stones are in a line, with each stone having a number engraved on it. 
namespace AoC2024; public static partial class PlutonianPebbles { public static IEnumerable<ulong> ReadStones(string filePath) { var line = File.ReadAllText(filePath).Trim(); return line.Split().Select(ulong.Parse); } }  The snippet below contains a subtle bug. The using statement disposes the StreamReader at the end of the scope . This happens before the IEnumerable<ulong> is consumed. However, because ReadLine eagerly reads the content, there is no exception thrown...."><meta property="og:type" content="website"><meta property="og:url" content="https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/2024/AoC2024/11-plutonian-pebbles/11-plutonian-pebbles/"><meta property="og:site_name" content="curiosities.dev"><link rel=stylesheet type=text/css href=/css/main.min.css><link rel=preload href=/css/all_font_awesome_v5.9.min.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=/css/all_font_awesome_v5.9.min.min.css></noscript><link rel="shortcut icon" href=/img/favicon_io/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/img/favicon_io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/img/favicon_io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/img/favicon_io/favicon-16x16.png><script async type=text/javascript src=/js/OrganizeCitations.min.js></script><script async type=text/javascript src=/js/HighlightAnchor.min.js></script><script async type=text/javascript src=/js/SummaryPageUtils.min.js></script><link rel=preload href=/css/vs.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=/css/vs.min.css></noscript><script defer type=text/javascript src=/js/highlight.min.min.js onload=addURLHighlighter();></script><script defer>const hjlsURLRegex=/https?:\/\/[^\s<]+/g
const hjlsCitationRegex=/&lt;span class=&quot;citation-ref&quot;&gt;&lt;a href=&quot;(.*)&quot;&gt;&lt;\/a&gt;&lt;\/span&gt;/g
function addURLHighlighter(){hljs.addPlugin({"after:highlight":(result)=>{result.value=result.value.replaceAll(hjlsURLRegex,"<a href='$&' target='_blank'>$&</a>");console.log(result.value);result.value=result.value.replaceAll(hjlsCitationRegex,"<span class='citation-ref'><a href='$1'></a></span>");}});hljs.highlightAll();}</script><script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body><div class=container id=main_div><form action=/search method=get id=globalSearchForm><input type=text id=q name=q title="Search Query">
<input type=submit id=submitButton value=Search></form><nav aria-label=Breadcrumb class=breadcrumb><ul><li><a href=https://www.curiosities.dev/>Home</a></li><li><a href=https://www.curiosities.dev/computer-science/>Computer Science & Software Engineering</a></li><li><a href=https://www.curiosities.dev/computer-science/programming-challenges/>Programming Challenges</a></li><li><a href=https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/>Advent of Code</a></li><li><a href=https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/2024/>Advent of Code 2024 - C#</a></li><li class=active><a href=https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/2024/AoC2024/11-plutonian-pebbles/11-plutonian-pebbles/>AoC 2024 Day 11: Plutonian Pebbles</a></li></ul></nav><section><header><h1>AoC 2024 Day 11: Plutonian Pebbles</h1><p class=meta>Dated Nov 29, 2025;
last modified on Sat, 29 Nov 2025</p></header><div id=toc-then-article><aside id=toc><nav id=TableOfContents><ul><li><a href=#parsing>Parsing</a></li><li><a href=#setup>Setup</a></li><li><a href=#problem>Problem</a></li><li><a href=#references>References</a></li></ul></nav></aside><article id=main-article><h2 id=parsing>Parsing</h2><p>The stones are in a line, with each stone having a number engraved on it. <span class=citation-ref><a href=#AoC2024Day10></a></span></p><div id=PlutonianPebbles.Parse.cs><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cs data-lang=cs><span style=color:#00a8c8>namespace</span> <span style=color:#111>AoC2024</span><span style=color:#111>;</span>

<span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>partial</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>PlutonianPebbles</span>
<span style=color:#111>{</span>
    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#111>IEnumerable</span><span style=color:#111>&lt;</span><span style=color:#00a8c8>ulong</span><span style=color:#111>&gt;</span> <span style=color:#111>ReadStones</span><span style=color:#111>(</span><span style=color:#00a8c8>string</span> <span style=color:#111>filePath</span><span style=color:#111>)</span>
    <span style=color:#111>{</span>
        <span style=color:#00a8c8>var</span> <span style=color:#111>line</span> <span style=color:#111>=</span> <span style=color:#111>File</span><span style=color:#111>.</span><span style=color:#111>ReadAllText</span><span style=color:#111>(</span><span style=color:#111>filePath</span><span style=color:#111>).</span><span style=color:#111>Trim</span><span style=color:#111>();</span>
        <span style=color:#00a8c8>return</span> <span style=color:#111>line</span><span style=color:#111>.</span><span style=color:#111>Split</span><span style=color:#111>().</span><span style=color:#111>Select</span><span style=color:#111>(</span><span style=color:#00a8c8>ulong</span><span style=color:#111>.</span><span style=color:#111>Parse</span><span style=color:#111>);</span>
    <span style=color:#111>}</span>
<span style=color:#111>}</span>
</code></pre></div></div><p>The snippet below contains a subtle bug. The <code>using</code> statement disposes the
<code>StreamReader</code> at the end of the scope <span class=citation-ref><a href=#usingStatement></a></span>. This happens
before the <code>IEnumerable&lt;ulong></code> is consumed. However, because <code>ReadLine</code> eagerly
reads the content, there is no exception thrown.</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cs data-lang=cs><span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#111>IEnumerable</span><span style=color:#111>&lt;</span><span style=color:#00a8c8>ulong</span><span style=color:#111>&gt;</span> <span style=color:#111>ReadStones</span><span style=color:#111>(</span><span style=color:#00a8c8>string</span> <span style=color:#111>filePath</span><span style=color:#111>)</span>
<span style=color:#111>{</span>
    <span style=color:#00a8c8>using</span> <span style=color:#111>StreamReader</span> <span style=color:#111>inputReader</span> <span style=color:#111>=</span> <span style=color:#00a8c8>new</span><span style=color:#111>(</span><span style=color:#111>filePath</span><span style=color:#111>);</span>
    <span style=color:#00a8c8>return</span> <span style=color:#111>inputReader</span><span style=color:#111>.</span><span style=color:#111>ReadLine</span><span style=color:#111>()?.</span><span style=color:#111>Split</span><span style=color:#111>().</span><span style=color:#111>Select</span><span style=color:#111>(</span><span style=color:#00a8c8>ulong</span><span style=color:#111>.</span><span style=color:#111>Parse</span><span style=color:#111>)</span> <span style=color:#111>??</span> <span style=color:#111>[];</span>
<span style=color:#111>}</span>
</code></pre></div><h2 id=setup>Setup</h2><p>Every time you blink, the stones each simultaneously change based on the first
applicable rule in this list:</p><ol><li>A stone engraved with <code>0</code> is replaced by a stone engraved with <code>1</code>.</li><li>A stone engraved with a number with an even number of digits is replaced by
two stones. The left half of the digits are engraved in the new left stone,
and the right half of the digits are engraved in the new right stone.</li><li>A stone is replaced by a new stone with an engraving equal to that of the old
stone multiplied by 2024.</li></ol><p>No matter how the stones change, their order is preserved. <span class=citation-ref><a href=#AoC2024Day10></a></span></p><h2 id=problem>Problem</h2><p>How many stones will you have after blinking 25 times? How about after 75 times?
<span class=citation-ref><a href=#AoC2024Day10></a></span></p><p>The problem is embarrassingly parallel in that the expansion of each stone can
be computed independently. However, the same sub-problems (given a stone and a
number of blinks to perform) might be solved repeatedly. Utilizing a cache in
this case seems more important than trying to explore parallelism.</p><div id=PlutonianPebbles.Common.cs><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cs data-lang=cs><span style=color:#00a8c8>using</span> <span style=color:#111>System.Collections.Concurrent</span><span style=color:#111>;</span>

<span style=color:#00a8c8>namespace</span> <span style=color:#111>AoC2024</span><span style=color:#111>;</span>

<span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>partial</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>PlutonianPebbles</span>
<span style=color:#111>{</span>
    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>ulong</span> <span style=color:#111>NumStonesAfterBlinks</span><span style=color:#111>(</span><span style=color:#111>IEnumerable</span><span style=color:#111>&lt;</span><span style=color:#00a8c8>ulong</span><span style=color:#111>&gt;</span> <span style=color:#111>stones</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>numBlinks</span><span style=color:#111>)</span>
    <span style=color:#111>{</span>
        <span style=color:#00a8c8>var</span> <span style=color:#111>cache</span> <span style=color:#111>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>ConcurrentDictionary</span><span style=color:#111>&lt;(</span><span style=color:#00a8c8>ulong</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span><span style=color:#111>),</span> <span style=color:#00a8c8>ulong</span><span style=color:#111>&gt;();</span>
        <span style=color:#00a8c8>return</span> <span style=color:#111>stones</span>
            <span style=color:#111>.</span><span style=color:#111>AsParallel</span><span style=color:#111>()</span>
            <span style=color:#111>.</span><span style=color:#111>Select</span><span style=color:#111>(</span><span style=color:#111>stone</span> <span style=color:#111>=&gt;</span> <span style=color:#111>CountStonesAfterBlinks</span><span style=color:#111>(</span><span style=color:#111>stone</span><span style=color:#111>,</span> <span style=color:#111>numBlinks</span><span style=color:#111>,</span> <span style=color:#111>cache</span><span style=color:#111>))</span>
            <span style=color:#111>.</span><span style=color:#111>Aggregate</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#111>UL</span><span style=color:#111>,</span> <span style=color:#111>(</span><span style=color:#111>acc</span><span style=color:#111>,</span> <span style=color:#111>count</span><span style=color:#111>)</span> <span style=color:#111>=&gt;</span> <span style=color:#111>acc</span> <span style=color:#111>+</span> <span style=color:#111>count</span><span style=color:#111>);</span>
    <span style=color:#111>}</span>

    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#111>IReadOnlyList</span><span style=color:#111>&lt;</span><span style=color:#00a8c8>ulong</span><span style=color:#111>&gt;</span> <span style=color:#111>Blink</span><span style=color:#111>(</span><span style=color:#00a8c8>ulong</span> <span style=color:#111>stone</span><span style=color:#111>)</span>
    <span style=color:#111>{</span>
        <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>stone</span> <span style=color:#111>==</span> <span style=color:#ae81ff>0</span><span style=color:#111>)</span>
            <span style=color:#00a8c8>return</span> <span style=color:#111>[</span><span style=color:#ae81ff>1</span><span style=color:#111>];</span>
        
        <span style=color:#00a8c8>var</span> <span style=color:#111>numDigits</span> <span style=color:#111>=</span> <span style=color:#111>GetNumberOfDigits</span><span style=color:#111>(</span><span style=color:#111>stone</span><span style=color:#111>);</span>
        <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>numDigits</span> <span style=color:#111>%</span> <span style=color:#ae81ff>2</span> <span style=color:#111>==</span> <span style=color:#ae81ff>0</span><span style=color:#111>)</span>
        <span style=color:#111>{</span>
            <span style=color:#00a8c8>var</span> <span style=color:#111>newLength</span> <span style=color:#111>=</span> <span style=color:#111>numDigits</span> <span style=color:#111>/</span> <span style=color:#ae81ff>2</span><span style=color:#111>;</span>
            <span style=color:#00a8c8>var</span> <span style=color:#111>pow10</span> <span style=color:#111>=</span> <span style=color:#111>(</span><span style=color:#00a8c8>ulong</span><span style=color:#111>)</span><span style=color:#111>Math</span><span style=color:#111>.</span><span style=color:#111>Pow</span><span style=color:#111>(</span><span style=color:#ae81ff>10</span><span style=color:#111>,</span> <span style=color:#111>newLength</span><span style=color:#111>);</span>
            <span style=color:#00a8c8>var</span> <span style=color:#111>a</span> <span style=color:#111>=</span> <span style=color:#111>stone</span> <span style=color:#111>/</span> <span style=color:#111>pow10</span><span style=color:#111>;</span>
            <span style=color:#00a8c8>return</span> <span style=color:#111>[</span><span style=color:#111>a</span><span style=color:#111>,</span> <span style=color:#111>stone</span> <span style=color:#111>-</span> <span style=color:#111>a</span> <span style=color:#111>*</span> <span style=color:#111>pow10</span><span style=color:#111>];</span>
        <span style=color:#111>}</span>

        <span style=color:#00a8c8>return</span> <span style=color:#111>[</span><span style=color:#111>stone</span> <span style=color:#111>*</span> <span style=color:#ae81ff>2024</span><span style=color:#111>UL</span><span style=color:#111>];</span>
    <span style=color:#111>}</span>

    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>ulong</span> <span style=color:#111>CountStonesAfterBlinks</span><span style=color:#111>(</span>
        <span style=color:#00a8c8>ulong</span> <span style=color:#111>stone</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>blinksRemaining</span><span style=color:#111>,</span> <span style=color:#111>ConcurrentDictionary</span><span style=color:#111>&lt;(</span><span style=color:#00a8c8>ulong</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span><span style=color:#111>),</span> <span style=color:#00a8c8>ulong</span><span style=color:#111>&gt;</span> <span style=color:#111>cache</span><span style=color:#111>)</span>
    <span style=color:#111>{</span>
        <span style=color:#00a8c8>var</span> <span style=color:#111>subProblem</span> <span style=color:#111>=</span> <span style=color:#111>(</span><span style=color:#111>stone</span><span style=color:#111>,</span> <span style=color:#111>blinksRemaining</span><span style=color:#111>);</span>
        <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>cache</span><span style=color:#111>.</span><span style=color:#111>TryGetValue</span><span style=color:#111>(</span><span style=color:#111>subProblem</span><span style=color:#111>,</span> <span style=color:#00a8c8>out</span> <span style=color:#00a8c8>var</span> <span style=color:#111>numChildStones</span><span style=color:#111>))</span>
            <span style=color:#00a8c8>return</span> <span style=color:#111>numChildStones</span><span style=color:#111>;</span>

        <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>blinksRemaining</span> <span style=color:#111>&lt;=</span> <span style=color:#ae81ff>0</span><span style=color:#111>)</span> <span style=color:#00a8c8>return</span> <span style=color:#ae81ff>1</span><span style=color:#111>;</span>

        <span style=color:#111>numChildStones</span> <span style=color:#111>=</span> <span style=color:#111>Blink</span><span style=color:#111>(</span><span style=color:#111>stone</span><span style=color:#111>)</span>
            <span style=color:#111>.</span><span style=color:#111>Select</span><span style=color:#111>(</span><span style=color:#111>childStone</span> <span style=color:#111>=&gt;</span> <span style=color:#111>CountStonesAfterBlinks</span><span style=color:#111>(</span><span style=color:#111>childStone</span><span style=color:#111>,</span> <span style=color:#111>blinksRemaining</span> <span style=color:#111>-</span> <span style=color:#ae81ff>1</span><span style=color:#111>,</span> <span style=color:#111>cache</span><span style=color:#111>))</span>
            <span style=color:#111>.</span><span style=color:#111>Aggregate</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#111>UL</span><span style=color:#111>,</span> <span style=color:#111>(</span><span style=color:#111>acc</span><span style=color:#111>,</span> <span style=color:#111>count</span><span style=color:#111>)</span> <span style=color:#111>=&gt;</span> <span style=color:#111>acc</span> <span style=color:#111>+</span> <span style=color:#111>count</span><span style=color:#111>);</span>
        
        <span style=color:#111>cache</span><span style=color:#111>[</span><span style=color:#111>subProblem</span><span style=color:#111>]</span> <span style=color:#111>=</span> <span style=color:#111>numChildStones</span><span style=color:#111>;</span>
        <span style=color:#00a8c8>return</span> <span style=color:#111>numChildStones</span><span style=color:#111>;</span>
    <span style=color:#111>}</span>

    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>int</span> <span style=color:#111>GetNumberOfDigits</span><span style=color:#111>(</span><span style=color:#00a8c8>ulong</span> <span style=color:#111>n</span><span style=color:#111>)</span> <span style=color:#111>=&gt;</span> <span style=color:#111>n</span> <span style=color:#00a8c8>switch</span>
    <span style=color:#111>{</span>
        <span style=color:#ae81ff>0</span> <span style=color:#111>=&gt;</span> <span style=color:#ae81ff>1</span><span style=color:#111>,</span>
        <span style=color:#111>_</span> <span style=color:#111>=&gt;</span> <span style=color:#111>(</span><span style=color:#00a8c8>int</span><span style=color:#111>)</span><span style=color:#111>Math</span><span style=color:#111>.</span><span style=color:#111>Floor</span><span style=color:#111>(</span><span style=color:#111>Math</span><span style=color:#111>.</span><span style=color:#111>Log10</span><span style=color:#111>(</span><span style=color:#111>n</span><span style=color:#111>))</span> <span style=color:#111>+</span> <span style=color:#ae81ff>1</span><span style=color:#111>,</span>
    <span style=color:#111>};</span>
<span style=color:#111>}</span>
</code></pre></div></div><div class=comment-holder><div class=comment><p>Good job to <code>Claude Sonnet 4.5</code> for pointing the DP approach below. I was
pleasantly surprised that it generated the DP solution in one shot and passed
all the tests. That said, I deleted the generated and tried to implement it
myself as an exercise. The model was better at this than me on this one.</p></div></div><p>Alternatively, we can count the number of stones in each blink. This offers more
memory efficiency because \(N\) stones with the same value are represented
compactly &ndash; the full array is never expanded. The compact representation also
avoids repeated computation. Caching in this case doesn&rsquo;t help because we never
encounter the same sub-problem twice given that we&rsquo;re considering blinks in
lockstep.</p><div class=comment-holder><div class=comment><p>Be on the lookout for such cases. Maintaining a cache and recursing has more
moving parts. Is there usually an iterative approach that traverses the problem
space more efficiently, and using an explicit cache is often a crutch for
inefficient traversal?</p></div></div><div id=PlutonianPebbles.DP.cs><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cs data-lang=cs><span style=color:#00a8c8>namespace</span> <span style=color:#111>AoC2024</span><span style=color:#111>;</span>

<span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>partial</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>PlutonianPebbles</span>
<span style=color:#111>{</span>
    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>ulong</span> <span style=color:#111>NumStonesAfterBlinksDP</span><span style=color:#111>(</span><span style=color:#111>IEnumerable</span><span style=color:#111>&lt;</span><span style=color:#00a8c8>ulong</span><span style=color:#111>&gt;</span> <span style=color:#111>stones</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>numBlinks</span><span style=color:#111>)</span>
    <span style=color:#111>{</span>
        <span style=color:#00a8c8>var</span> <span style=color:#111>stoneCounts</span> <span style=color:#111>=</span> <span style=color:#111>stones</span><span style=color:#111>.</span><span style=color:#111>GroupBy</span><span style=color:#111>(</span><span style=color:#111>s</span> <span style=color:#111>=&gt;</span> <span style=color:#111>s</span><span style=color:#111>).</span><span style=color:#111>ToDictionary</span><span style=color:#111>(</span><span style=color:#111>g</span> <span style=color:#111>=&gt;</span> <span style=color:#111>g</span><span style=color:#111>.</span><span style=color:#111>Key</span><span style=color:#111>,</span> <span style=color:#111>g</span> <span style=color:#111>=&gt;</span> <span style=color:#111>(</span><span style=color:#00a8c8>ulong</span><span style=color:#111>)</span><span style=color:#111>g</span><span style=color:#111>.</span><span style=color:#111>Count</span><span style=color:#111>());</span>

        <span style=color:#00a8c8>for</span> <span style=color:#111>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>blink</span> <span style=color:#111>=</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span> <span style=color:#111>blink</span> <span style=color:#111>&lt;</span> <span style=color:#111>numBlinks</span><span style=color:#111>;</span> <span style=color:#111>blink</span><span style=color:#111>++)</span>
        <span style=color:#111>{</span>
            <span style=color:#00a8c8>var</span> <span style=color:#111>nextCounts</span> <span style=color:#111>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>Dictionary</span><span style=color:#111>&lt;</span><span style=color:#00a8c8>ulong</span><span style=color:#111>,</span> <span style=color:#00a8c8>ulong</span><span style=color:#111>&gt;();</span>
            <span style=color:#00a8c8>foreach</span> <span style=color:#111>(</span><span style=color:#00a8c8>var</span> <span style=color:#111>(</span><span style=color:#111>stone</span><span style=color:#111>,</span> <span style=color:#111>count</span><span style=color:#111>)</span> <span style=color:#00a8c8>in</span> <span style=color:#111>stoneCounts</span><span style=color:#111>)</span>
            <span style=color:#111>{</span>
                <span style=color:#00a8c8>foreach</span> <span style=color:#111>(</span><span style=color:#00a8c8>var</span> <span style=color:#111>newStone</span> <span style=color:#00a8c8>in</span> <span style=color:#111>Blink</span><span style=color:#111>(</span><span style=color:#111>stone</span><span style=color:#111>))</span>
                <span style=color:#111>{</span>
                    <span style=color:#111>nextCounts</span><span style=color:#111>[</span><span style=color:#111>newStone</span><span style=color:#111>]</span> <span style=color:#111>=</span> <span style=color:#111>nextCounts</span><span style=color:#111>.</span><span style=color:#111>GetValueOrDefault</span><span style=color:#111>(</span><span style=color:#111>newStone</span><span style=color:#111>)</span> <span style=color:#111>+</span> <span style=color:#111>count</span><span style=color:#111>;</span>
                <span style=color:#111>}</span>
            <span style=color:#111>}</span>
            <span style=color:#111>stoneCounts</span> <span style=color:#111>=</span> <span style=color:#111>nextCounts</span><span style=color:#111>;</span>
        <span style=color:#111>}</span>

        <span style=color:#00a8c8>return</span> <span style=color:#111>stoneCounts</span><span style=color:#111>.</span><span style=color:#111>Values</span><span style=color:#111>.</span><span style=color:#111>Aggregate</span><span style=color:#111>(</span><span style=color:#ae81ff>0</span><span style=color:#111>UL</span><span style=color:#111>,</span> <span style=color:#111>(</span><span style=color:#111>acc</span><span style=color:#111>,</span> <span style=color:#111>count</span><span style=color:#111>)</span> <span style=color:#111>=&gt;</span> <span style=color:#111>acc</span> <span style=color:#111>+</span> <span style=color:#111>count</span><span style=color:#111>);</span>
    <span style=color:#111>}</span>
<span style=color:#111>}</span>
</code></pre></div></div><p>I tried using PLINQ in <code>CountStonesAfterBlinks</code>, only to find the program ran
slower. <span class=citation-ref><a href=#PLINQPitfalls></a></span>notes that over-parallelization is a common
pitfall, especially in nested queries. PLINQ is probably (general advice is to
measure) a speedup when:</p><ol><li>The inner data source is known to be very long.</li><li>Each inner computation is expensive.</li><li>The target system has enough processors to handle the number of threads.</li></ol><p>In <span class=citation-ref><a href=#AoC2024Day10></a></span>(2) and (3) are false. The overhead of
parallelization gets in the way.</p><h2 id=references>References</h2><ol><li><div class=citation citation-icon-class="fas fa-fw fa-globe" cited-by-count is-main><cite id=AoC2024Day10>Day 11 - Advent of Code 2024: Plutonian Pebbles<i>.</i></cite>
Eric Wastl.
<a href=https://adventofcode.com/2024/day/11 target=_blank rel=noopener><img src="https://www.google.com/s2/favicons?domain=adventofcode.com" loading=lazy aria-hidden=true width=16 height=16>
<i>adventofcode.com</i> <i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.
<i class="fas fa-fw fa-globe" aria-hidden=true></i>Accessed Nov 29, 2025.</div></li><li><div class=citation citation-icon-class="fas fa-fw fa-globe" cited-by-count is-main><cite id=PLINQPitfalls>Potential pitfalls with PLINQ - .NET | Microsoft Learn<i>.</i></cite>
<a href=https://learn.microsoft.com/en-us/dotnet/standard/parallel-programming/potential-pitfalls-with-plinq target=_blank rel=noopener><img src="https://www.google.com/s2/favicons?domain=learn.microsoft.com" loading=lazy aria-hidden=true width=16 height=16>
<i>learn.microsoft.com</i> <i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.
<i class="fas fa-fw fa-globe" aria-hidden=true></i>Accessed Nov 29, 2025.</div></li><li><div class=citation citation-icon-class="fas fa-fw fa-globe" cited-by-count is-main><cite id=usingStatement>using statement - ensure the correct use of disposable objects - C# reference | Microsoft Learn<i>.</i></cite>
<a href=https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/statements/using target=_blank rel=noopener><img src="https://www.google.com/s2/favicons?domain=learn.microsoft.com" loading=lazy aria-hidden=true width=16 height=16>
<i>learn.microsoft.com</i> <i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.
<i class="fas fa-fw fa-globe" aria-hidden=true></i>Accessed Nov 30, 2025.</div></li></ol></article><div style=font-size:smaller><aside id=authors-holder style="margin:0 0 2%">Cited Authors:
<a href=/cited-authors/Wastl-Eric>Wastl, Eric</a></aside><aside id=domains-holder style="margin:0 0 2%">Cited Domains:
<a href=/domains/adventofcode.com style="margin:0 2px"><img src="https://www.google.com/s2/favicons?domain=adventofcode.com" loading=lazy aria-hidden=true width=16 height=16>
adventofcode.com</a>
<a href=/domains/learn.microsoft.com style="margin:0 2px"><img src="https://www.google.com/s2/favicons?domain=learn.microsoft.com" loading=lazy aria-hidden=true width=16 height=16>
learn.microsoft.com</a></aside></div></div><footer><a href=https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/2024/aoc-csharp.instructions/>&#171; LLM Instructions for Advent of Code Using C#</a>
<a href=https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/2024/AoC2024/12-garden-groups/12-garden-groups/>AoC 2024 Day 12: Garden Groups &#187;</a></footer></section></div><footer><a href=/about>About</a>
<a href=/search>Search</a></footer></body></html>