<!doctype html><html lang=en><head><title>AoC 2024 Day 08: Resonant Collinearity | curiosities.dev</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo (https://gohugo.io/)"><meta name=description content="Parsing Each antenna in the map is tuned to a frequency indicated by a single lowercase letter, uppercase letter, or digit. 
Two antennas with the same frequency create two collinear antinodes on either side where one of the antennas is twice as far away as the other, e.g.
 .......... ...#...... .......... ....f..... .......... .....f.... .......... ......#... .......... ..........  Antinodes can occur at locations that contain other antennas...."><meta property="og:title" content="AoC 2024 Day 08: Resonant Collinearity"><meta property="og:description" content="Parsing Each antenna in the map is tuned to a frequency indicated by a single lowercase letter, uppercase letter, or digit. 
Two antennas with the same frequency create two collinear antinodes on either side where one of the antennas is twice as far away as the other, e.g.
 .......... ...#...... .......... ....f..... .......... .....f.... .......... ......#... .......... ..........  Antinodes can occur at locations that contain other antennas...."><meta property="og:type" content="website"><meta property="og:url" content="https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/2024/AoC2024/08-resonant-collinearity/08-resonant-collinearity/"><meta property="og:site_name" content="curiosities.dev"><link rel=stylesheet type=text/css href=/css/main.min.css><link rel=preload href=/css/all_font_awesome_v5.9.min.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=/css/all_font_awesome_v5.9.min.min.css></noscript><link rel="shortcut icon" href=/img/favicon_io/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/img/favicon_io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/img/favicon_io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/img/favicon_io/favicon-16x16.png><script async type=text/javascript src=/js/OrganizeCitations.min.js></script><script async type=text/javascript src=/js/HighlightAnchor.min.js></script><script async type=text/javascript src=/js/SummaryPageUtils.min.js></script><script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body><div class=container id=main_div><form action=/search method=get id=globalSearchForm><input type=text id=q name=q title="Search Query">
<input type=submit id=submitButton value=Search></form><nav aria-label=Breadcrumb class=breadcrumb><ul><li><a href=https://www.curiosities.dev/>Home</a></li><li><a href=https://www.curiosities.dev/computer-science/>Computer Science & Software Engineering</a></li><li><a href=https://www.curiosities.dev/computer-science/programming-challenges/>Programming Challenges</a></li><li><a href=https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/>Advent of Code</a></li><li><a href=https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/2024/>Advent of Code 2024 - C#</a></li><li class=active><a href=https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/2024/AoC2024/08-resonant-collinearity/08-resonant-collinearity/>AoC 2024 Day 08: Resonant Collinearity</a></li></ul></nav><section><header><h1>AoC 2024 Day 08: Resonant Collinearity</h1><p class=meta>Dated Aug 23, 2025;
last modified on Sat, 23 Aug 2025</p></header><div id=toc-then-article><aside id=toc><nav id=TableOfContents><ul><li><a href=#parsing>Parsing</a></li><li><a href=#part-one>Part One</a></li><li><a href=#part-two>Part Two</a></li><li><a href=#references>References</a></li></ul></nav></aside><article id=main-article><h2 id=parsing>Parsing</h2><p>Each antenna in the map is tuned to a frequency indicated by a single lowercase
letter, uppercase letter, or digit. <span class=citation-ref><a href=#AoC2024Day08></a></span></p><p>Two antennas with the same frequency create two collinear antinodes on either
side where one of the antennas is twice as far away as the other, e.g.</p><table><tr><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td></tr><tr><td>.</td><td>.</td><td>.</td><td>#</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td></tr><tr><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td></tr><tr><td>.</td><td>.</td><td>.</td><td>.</td><td>f</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td></tr><tr><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td></tr><tr><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>f</td><td>.</td><td>.</td><td>.</td><td>.</td></tr><tr><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td></tr><tr><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>#</td><td>.</td><td>.</td><td>.</td></tr><tr><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td></tr><tr><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td></tr></table><p>Antinodes can occur at locations that contain other antennas. <span class=citation-ref><a href=#AoC2024Day08></a></span></p><p><a href=#part-one>Part One</a>
requires computing locations of antinodes. Given antennas
with frequency \(f\), I need to pairwise match them and compute their
antinodes. Being able to group all such antennas is useful for this puzzle.</p><details><summary>ResonantCollinearity.Parse.cs</summary><div id=ResonantCollinearity.Parse.cs><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cs data-lang=cs><span style=color:#00a8c8>using</span> <span style=color:#111>System.Text.RegularExpressions</span><span style=color:#111>;</span>

<span style=color:#00a8c8>namespace</span> <span style=color:#111>AoC2024</span><span style=color:#111>;</span>

<span style=color:#00a8c8>public</span> <span style=color:#00a8c8>partial</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>ResonantCollinearity</span>
<span style=color:#111>{</span>
    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>readonly</span> <span style=color:#111>record</span> <span style=color:#00a8c8>struct</span> <span style=color:#75af00>Coordinate</span><span style=color:#111>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>R</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>C</span><span style=color:#111>);</span>
    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>readonly</span> <span style=color:#111>record</span> <span style=color:#00a8c8>struct</span> <span style=color:#75af00>AntennasMap</span><span style=color:#111>(</span>
        <span style=color:#00a8c8>int</span> <span style=color:#111>RowCount</span><span style=color:#111>,</span>
        <span style=color:#00a8c8>int</span> <span style=color:#111>ColCount</span><span style=color:#111>,</span>
        <span style=color:#111>IDictionary</span><span style=color:#111>&lt;</span><span style=color:#00a8c8>char</span><span style=color:#111>,</span> <span style=color:#111>List</span><span style=color:#111>&lt;</span><span style=color:#111>Coordinate</span><span style=color:#111>&gt;&gt;</span> <span style=color:#111>AntennasByFrequency</span><span style=color:#111>);</span>
    
    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>readonly</span> <span style=color:#111>AntennasMap</span> <span style=color:#111>antennasMap</span><span style=color:#111>;</span>

    <span style=color:#00a8c8>public</span> <span style=color:#111>ResonantCollinearity</span><span style=color:#111>(</span><span style=color:#00a8c8>string</span> <span style=color:#111>filePath</span><span style=color:#111>)</span>
    <span style=color:#111>{</span>
        <span style=color:#111>Dictionary</span><span style=color:#111>&lt;</span><span style=color:#00a8c8>char</span><span style=color:#111>,</span> <span style=color:#111>List</span><span style=color:#111>&lt;</span><span style=color:#111>Coordinate</span><span style=color:#111>&gt;&gt;</span> <span style=color:#111>antennasByFrequency</span> <span style=color:#111>=</span> <span style=color:#111>[];</span>

        <span style=color:#00a8c8>string?</span> <span style=color:#111>line</span> <span style=color:#111>=</span> <span style=color:#00a8c8>null</span><span style=color:#111>;</span>
        <span style=color:#00a8c8>int</span> <span style=color:#111>rowCount</span> <span style=color:#111>=</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
        <span style=color:#00a8c8>int</span> <span style=color:#111>colCount</span> <span style=color:#111>=</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
        <span style=color:#00a8c8>using</span> <span style=color:#111>var</span> <span style=color:#111>inputReader</span> <span style=color:#111>=</span> <span style=color:#00a8c8>new</span> <span style=color:#111>StreamReader</span><span style=color:#111>(</span><span style=color:#111>filePath</span><span style=color:#111>);</span>
        <span style=color:#00a8c8>while</span> <span style=color:#111>((</span><span style=color:#111>line</span> <span style=color:#111>=</span> <span style=color:#111>inputReader</span><span style=color:#111>.</span><span style=color:#111>ReadLine</span><span style=color:#111>())</span> <span style=color:#111>!=</span> <span style=color:#00a8c8>null</span><span style=color:#111>)</span>
        <span style=color:#111>{</span>
            <span style=color:#00a8c8>foreach</span> <span style=color:#111>(</span><span style=color:#111>Match</span> <span style=color:#111>match</span> <span style=color:#00a8c8>in</span> <span style=color:#111>antennaFrequencyRegex</span><span style=color:#111>.</span><span style=color:#111>Matches</span><span style=color:#111>(</span><span style=color:#111>line</span><span style=color:#111>))</span>
            <span style=color:#111>{</span>
                <span style=color:#00a8c8>var</span> <span style=color:#111>frequency</span> <span style=color:#111>=</span> <span style=color:#111>match</span><span style=color:#111>.</span><span style=color:#111>Value</span><span style=color:#111>[</span><span style=color:#ae81ff>0</span><span style=color:#111>];</span>
                <span style=color:#00a8c8>if</span> <span style=color:#111>(!</span><span style=color:#111>antennasByFrequency</span><span style=color:#111>.</span><span style=color:#111>ContainsKey</span><span style=color:#111>(</span><span style=color:#111>frequency</span><span style=color:#111>))</span>
                    <span style=color:#111>antennasByFrequency</span><span style=color:#111>[</span><span style=color:#111>frequency</span><span style=color:#111>]</span> <span style=color:#111>=</span> <span style=color:#111>[];</span>

                <span style=color:#111>antennasByFrequency</span><span style=color:#111>[</span><span style=color:#111>frequency</span><span style=color:#111>].</span><span style=color:#111>Add</span><span style=color:#111>(</span><span style=color:#00a8c8>new</span> <span style=color:#111>(</span><span style=color:#111>rowCount</span><span style=color:#111>,</span> <span style=color:#111>match</span><span style=color:#111>.</span><span style=color:#111>Index</span><span style=color:#111>));</span>
            <span style=color:#111>}</span>

            <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>colCount</span> <span style=color:#111>==</span> <span style=color:#ae81ff>0</span><span style=color:#111>)</span>
            <span style=color:#111>{</span>
                <span style=color:#111>colCount</span> <span style=color:#111>=</span> <span style=color:#111>line</span><span style=color:#111>.</span><span style=color:#111>Length</span><span style=color:#111>;</span>
            <span style=color:#111>}</span>
            <span style=color:#00a8c8>else</span> <span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#111>line</span><span style=color:#111>.</span><span style=color:#111>Length</span> <span style=color:#111>!=</span> <span style=color:#111>colCount</span><span style=color:#111>)</span>
            <span style=color:#111>{</span>
                <span style=color:#00a8c8>throw</span> <span style=color:#00a8c8>new</span> <span style=color:#111>ArgumentException</span><span style=color:#111>(</span>
                    <span style=color:#d88200>$&#34;Expected {colCount} columns but got {line.Length}&#34;</span><span style=color:#111>);</span>
            <span style=color:#111>}</span>

            <span style=color:#111>rowCount</span><span style=color:#111>++;</span>
        <span style=color:#111>}</span>

        <span style=color:#111>antennasMap</span> <span style=color:#111>=</span> <span style=color:#00a8c8>new</span><span style=color:#111>(</span><span style=color:#111>rowCount</span><span style=color:#111>,</span> <span style=color:#111>colCount</span><span style=color:#111>,</span> <span style=color:#111>antennasByFrequency</span><span style=color:#111>);</span>
    <span style=color:#111>}</span>

    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>static</span> <span style=color:#111>Regex</span> <span style=color:#111>antennaFrequencyRegex</span> <span style=color:#111>=</span> <span style=color:#111>AntennaFrequencyRegex</span><span style=color:#111>();</span>
<span style=color:#75af00>
</span><span style=color:#75af00>    [GeneratedRegex(@&#34;[\w\d]</span><span style=color:#d88200>&#34;)]
</span><span style=color:#d88200></span>    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>static</span> <span style=color:#00a8c8>partial</span> <span style=color:#111>Regex</span> <span style=color:#111>AntennaFrequencyRegex</span><span style=color:#111>();</span>  
<span style=color:#111>}</span>
</code></pre></div></div></details><h2 id=part-one>Part One</h2><p>How many unique locations within the bounds of the map contain an antinode? <span class=citation-ref><a href=#AoC2024Day08></a></span></p><details><summary>Sample input with answer overlay</summary><table><tr><td></td><td>0</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td><td>10</td><td>11</td></tr><tr><td>0</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>#</td><td>.</td><td>.</td><td>.</td><td>.</td><td>#</td></tr><tr><td>1</td><td>.</td><td>.</td><td>.</td><td>#</td><td>.</td><td>.</td><td>.</td><td>.</td><td>0</td><td>.</td><td>.</td><td>.</td></tr><tr><td>2</td><td>.</td><td>.</td><td>.</td><td>.</td><td>#</td><td>0</td><td>.</td><td>.</td><td>.</td><td>.</td><td>#</td><td>.</td></tr><tr><td>3</td><td>.</td><td>.</td><td>#</td><td>.</td><td>.</td><td>.</td><td>.</td><td>0</td><td>.</td><td>.</td><td>.</td><td>.</td></tr><tr><td>4</td><td>.</td><td>.</td><td>.</td><td>.</td><td>0</td><td>.</td><td>.</td><td>.</td><td>.</td><td>#</td><td>.</td><td>.</td></tr><tr><td>5</td><td>.</td><td>#</td><td>.</td><td>.</td><td>.</td><td>.</td><td>A</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td></tr><tr><td>6</td><td>.</td><td>.</td><td>.</td><td>#</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td></tr><tr><td>7</td><td>#</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>#</td><td>.</td><td>.</td><td>.</td><td>.</td></tr><tr><td>8</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>A</td><td>.</td><td>.</td><td>.</td></tr><tr><td>9</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>A</td><td>.</td><td>.</td></tr><tr><td>10</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>#</td><td>.</td></tr><tr><td>11</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>.</td><td>#</td><td>.</td></tr></table></details><p>Given \(N\) antennas with the same frequency, each pairing generates 2
antinodes. There are \(\frac{N(N-1)}{2}\) possible pairings and so we have
\(\mathcal{O}(N^2)\) work to do for each frequency.</p><p>The same \((r_i, c_i), (r_j, c_j)\) computes the same antinode positions
regardless of the associated frequency. Caching \((r_i, c_i, r_j, c_j)\) can
save us from repeating some of the \(\mathcal{O}(N^2)\) work because all we
care about are unique antinode positions.</p><p>Because the antenna locations are ordered based on how we encountered them on
the map, we don&rsquo;t need to cache both \((r_i, c_i, r_j, c_j)\) and \((r_j,
c_j, r_i, c_i)\).</p><div id=ResonantCollinearity.PartOne.cs><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cs data-lang=cs><span style=color:#00a8c8>namespace</span> <span style=color:#111>AoC2024</span><span style=color:#111>;</span>

<span style=color:#00a8c8>public</span> <span style=color:#00a8c8>partial</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>ResonantCollinearity</span>
<span style=color:#111>{</span>
    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>int</span> <span style=color:#111>PartOne</span><span style=color:#111>()</span> <span style=color:#111>=&gt;</span> <span style=color:#111>NumDistinctAntinodes</span><span style=color:#111>(</span><span style=color:#111>CollinearPairedAntinodes</span><span style=color:#111>);</span>

    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>int</span> <span style=color:#111>NumDistinctAntinodes</span><span style=color:#111>(</span>
        <span style=color:#111>Func</span><span style=color:#111>&lt;</span><span style=color:#111>Coordinate</span><span style=color:#111>,</span> <span style=color:#111>Coordinate</span><span style=color:#111>,</span> <span style=color:#111>IEnumerable</span><span style=color:#111>&lt;</span><span style=color:#111>Coordinate</span><span style=color:#111>&gt;&gt;</span> <span style=color:#111>computeAntinodes</span><span style=color:#111>)</span>
    <span style=color:#111>{</span>
        <span style=color:#111>HashSet</span><span style=color:#111>&lt;(</span><span style=color:#111>Coordinate</span><span style=color:#111>,</span> <span style=color:#111>Coordinate</span><span style=color:#111>)&gt;</span> <span style=color:#111>computedPairs</span> <span style=color:#111>=</span> <span style=color:#111>[];</span>

        <span style=color:#00a8c8>return</span> <span style=color:#111>antennasMap</span><span style=color:#111>.</span><span style=color:#111>AntennasByFrequency</span><span style=color:#111>.</span><span style=color:#111>Values</span>
            <span style=color:#111>.</span><span style=color:#111>SelectMany</span><span style=color:#111>(</span><span style=color:#111>matchingAntennasCoordinates</span> <span style=color:#111>=&gt;</span>
                <span style=color:#111>matchingAntennasCoordinates</span>
                    <span style=color:#111>.</span><span style=color:#111>SelectMany</span><span style=color:#111>((</span><span style=color:#111>p1</span><span style=color:#111>,</span> <span style=color:#111>i</span><span style=color:#111>)</span> <span style=color:#111>=&gt;</span>
                        <span style=color:#111>matchingAntennasCoordinates</span>
                            <span style=color:#111>.</span><span style=color:#111>Skip</span><span style=color:#111>(</span><span style=color:#111>i</span> <span style=color:#111>+</span> <span style=color:#ae81ff>1</span><span style=color:#111>)</span>
                            <span style=color:#111>.</span><span style=color:#111>Select</span><span style=color:#111>(</span><span style=color:#111>p2</span> <span style=color:#111>=&gt;</span> <span style=color:#111>(</span><span style=color:#111>p1</span><span style=color:#111>,</span> <span style=color:#111>p2</span><span style=color:#111>))</span>
                            <span style=color:#111>.</span><span style=color:#111>Where</span><span style=color:#111>(</span><span style=color:#111>pair</span> <span style=color:#111>=&gt;</span> <span style=color:#111>!</span><span style=color:#111>computedPairs</span><span style=color:#111>.</span><span style=color:#111>Contains</span><span style=color:#111>(</span><span style=color:#111>pair</span><span style=color:#111>))</span>
                            <span style=color:#111>.</span><span style=color:#111>Select</span><span style=color:#111>(</span><span style=color:#111>pair</span> <span style=color:#111>=&gt;</span> <span style=color:#111>{</span>
                                <span style=color:#111>computedPairs</span><span style=color:#111>.</span><span style=color:#111>Add</span><span style=color:#111>(</span><span style=color:#111>pair</span><span style=color:#111>);</span>
                                <span style=color:#00a8c8>return</span> <span style=color:#111>computeAntinodes</span><span style=color:#111>(</span><span style=color:#111>pair</span><span style=color:#111>.</span><span style=color:#111>p1</span><span style=color:#111>,</span> <span style=color:#111>pair</span><span style=color:#111>.</span><span style=color:#111>p2</span><span style=color:#111>);</span>
                            <span style=color:#111>})))</span>
                    <span style=color:#111>.</span><span style=color:#111>SelectMany</span><span style=color:#111>(</span><span style=color:#111>a</span> <span style=color:#111>=&gt;</span> <span style=color:#111>a</span><span style=color:#111>)</span>
            <span style=color:#111>.</span><span style=color:#111>Distinct</span><span style=color:#111>()</span>
            <span style=color:#111>.</span><span style=color:#111>Count</span><span style=color:#111>();</span>
    <span style=color:#111>}</span>

    <span style=color:#00a8c8>private</span> <span style=color:#111>IEnumerable</span><span style=color:#111>&lt;</span><span style=color:#111>Coordinate</span><span style=color:#111>&gt;</span> <span style=color:#111>CollinearPairedAntinodes</span><span style=color:#111>(</span><span style=color:#111>Coordinate</span> <span style=color:#111>p1</span><span style=color:#111>,</span> <span style=color:#111>Coordinate</span> <span style=color:#111>p2</span><span style=color:#111>)</span>
    <span style=color:#111>{</span>
        <span style=color:#00a8c8>var</span> <span style=color:#111>(</span><span style=color:#111>dr</span><span style=color:#111>,</span> <span style=color:#111>dc</span><span style=color:#111>)</span> <span style=color:#111>=</span> <span style=color:#111>VectorP1ToP2</span><span style=color:#111>(</span><span style=color:#111>p1</span><span style=color:#111>,</span> <span style=color:#111>p2</span><span style=color:#111>);</span>
        <span style=color:#00a8c8>return</span> <span style=color:#00a8c8>new</span> <span style=color:#111>Coordinate</span><span style=color:#111>[]</span>
        <span style=color:#111>{</span>
            <span style=color:#00a8c8>new</span><span style=color:#111>(</span><span style=color:#111>p2</span><span style=color:#111>.</span><span style=color:#111>R</span> <span style=color:#111>+</span> <span style=color:#111>dr</span><span style=color:#111>,</span> <span style=color:#111>p2</span><span style=color:#111>.</span><span style=color:#111>C</span> <span style=color:#111>+</span> <span style=color:#111>dc</span><span style=color:#111>),</span>
            <span style=color:#00a8c8>new</span><span style=color:#111>(</span><span style=color:#111>p1</span><span style=color:#111>.</span><span style=color:#111>R</span> <span style=color:#111>-</span> <span style=color:#111>dr</span><span style=color:#111>,</span> <span style=color:#111>p1</span><span style=color:#111>.</span><span style=color:#111>C</span> <span style=color:#111>-</span> <span style=color:#111>dc</span><span style=color:#111>)</span>
        <span style=color:#111>}.</span><span style=color:#111>Where</span><span style=color:#111>(</span><span style=color:#111>InBounds</span><span style=color:#111>);</span>
    <span style=color:#111>}</span>

    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>static</span> <span style=color:#111>(</span><span style=color:#00a8c8>int</span> <span style=color:#111>dr</span><span style=color:#111>,</span> <span style=color:#00a8c8>int</span> <span style=color:#111>dc</span><span style=color:#111>)</span> <span style=color:#111>VectorP1ToP2</span><span style=color:#111>(</span><span style=color:#111>Coordinate</span> <span style=color:#111>p1</span><span style=color:#111>,</span> <span style=color:#111>Coordinate</span> <span style=color:#111>p2</span><span style=color:#111>)</span> <span style=color:#111>=&gt;</span>
        <span style=color:#111>(</span><span style=color:#111>p2</span><span style=color:#111>.</span><span style=color:#111>R</span> <span style=color:#111>-</span> <span style=color:#111>p1</span><span style=color:#111>.</span><span style=color:#111>R</span><span style=color:#111>,</span> <span style=color:#111>p2</span><span style=color:#111>.</span><span style=color:#111>C</span> <span style=color:#111>-</span> <span style=color:#111>p1</span><span style=color:#111>.</span><span style=color:#111>C</span><span style=color:#111>);</span>

    <span style=color:#00a8c8>private</span> <span style=color:#00a8c8>bool</span> <span style=color:#111>InBounds</span><span style=color:#111>(</span><span style=color:#111>Coordinate</span> <span style=color:#111>p</span><span style=color:#111>)</span> <span style=color:#111>=&gt;</span>
        <span style=color:#111>p</span><span style=color:#111>.</span><span style=color:#111>R</span> <span style=color:#111>&gt;=</span> <span style=color:#ae81ff>0</span> <span style=color:#111>&amp;&amp;</span> <span style=color:#111>p</span><span style=color:#111>.</span><span style=color:#111>R</span> <span style=color:#111>&lt;</span> <span style=color:#111>antennasMap</span><span style=color:#111>.</span><span style=color:#111>RowCount</span>
        <span style=color:#111>&amp;&amp;</span> <span style=color:#111>p</span><span style=color:#111>.</span><span style=color:#111>C</span> <span style=color:#111>&gt;=</span> <span style=color:#ae81ff>0</span> <span style=color:#111>&amp;&amp;</span> <span style=color:#111>p</span><span style=color:#111>.</span><span style=color:#111>C</span> <span style=color:#111>&lt;</span> <span style=color:#111>antennasMap</span><span style=color:#111>.</span><span style=color:#111>ColCount</span><span style=color:#111>;</span>
<span style=color:#111>}</span>
</code></pre></div></div><h2 id=part-two>Part Two</h2><p>An antinode occurs at any grid position that is collinear with at least two
antennas of the same frequency. How many unique locations within the bounds of
the map contain an antinode? <span class=citation-ref><a href=#AoC2024Day08></a></span></p><p>The challenge here is in the explosion of antinode locations. For example, in an
\(N \times N\) grid, matching antennas at \((a, a)\) and \((b, b)\) lead
to \(N\) antinode positions along the diagonal.</p><p>If the optimizations in
<a href=#part-one>Part One</a>
are insufficient, then we might
want to cache a combination of a unit vector and the top/left cell to avoid
repeated computation. Turns out the optimizations are sufficient; won&rsquo;t
complicate it further.</p><div id=ResonantCollinearity.PartTwo.cs><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-cs data-lang=cs><span style=color:#00a8c8>namespace</span> <span style=color:#111>AoC2024</span><span style=color:#111>;</span>

<span style=color:#00a8c8>public</span> <span style=color:#00a8c8>partial</span> <span style=color:#00a8c8>class</span> <span style=color:#75af00>ResonantCollinearity</span>
<span style=color:#111>{</span>
    <span style=color:#00a8c8>public</span> <span style=color:#00a8c8>int</span> <span style=color:#111>PartTwo</span><span style=color:#111>()</span> <span style=color:#111>=&gt;</span> <span style=color:#111>NumDistinctAntinodes</span><span style=color:#111>(</span><span style=color:#111>CollinearAntinodes</span><span style=color:#111>);</span>

    <span style=color:#00a8c8>private</span> <span style=color:#111>IEnumerable</span><span style=color:#111>&lt;</span><span style=color:#111>Coordinate</span><span style=color:#111>&gt;</span> <span style=color:#111>CollinearAntinodes</span><span style=color:#111>(</span><span style=color:#111>Coordinate</span> <span style=color:#111>p1</span><span style=color:#111>,</span> <span style=color:#111>Coordinate</span> <span style=color:#111>p2</span><span style=color:#111>)</span>
    <span style=color:#111>{</span>
        <span style=color:#00a8c8>var</span> <span style=color:#111>(</span><span style=color:#111>dr</span><span style=color:#111>,</span> <span style=color:#111>dc</span><span style=color:#111>)</span> <span style=color:#111>=</span> <span style=color:#111>VectorP1ToP2</span><span style=color:#111>(</span><span style=color:#111>p1</span><span style=color:#111>,</span> <span style=color:#111>p2</span><span style=color:#111>);</span>
        
        <span style=color:#00a8c8>var</span> <span style=color:#111>antinode</span> <span style=color:#111>=</span> <span style=color:#111>p1</span><span style=color:#111>;</span>
        <span style=color:#00a8c8>while</span> <span style=color:#111>(</span><span style=color:#111>InBounds</span><span style=color:#111>(</span><span style=color:#111>antinode</span><span style=color:#111>))</span>
        <span style=color:#111>{</span>
            <span style=color:#00a8c8>yield</span> <span style=color:#00a8c8>return</span> <span style=color:#111>antinode</span><span style=color:#111>;</span>
            <span style=color:#111>antinode</span> <span style=color:#111>=</span> <span style=color:#00a8c8>new</span><span style=color:#111>(</span><span style=color:#111>antinode</span><span style=color:#111>.</span><span style=color:#111>R</span> <span style=color:#111>-</span> <span style=color:#111>dr</span><span style=color:#111>,</span> <span style=color:#111>antinode</span><span style=color:#111>.</span><span style=color:#111>C</span> <span style=color:#111>-</span> <span style=color:#111>dc</span><span style=color:#111>);</span>
        <span style=color:#111>}</span>

        <span style=color:#111>antinode</span> <span style=color:#111>=</span> <span style=color:#00a8c8>new</span><span style=color:#111>(</span><span style=color:#111>p1</span><span style=color:#111>.</span><span style=color:#111>R</span> <span style=color:#111>+</span> <span style=color:#111>dr</span><span style=color:#111>,</span> <span style=color:#111>p1</span><span style=color:#111>.</span><span style=color:#111>C</span> <span style=color:#111>+</span> <span style=color:#111>dc</span><span style=color:#111>);</span>
        <span style=color:#00a8c8>while</span> <span style=color:#111>(</span><span style=color:#111>InBounds</span><span style=color:#111>(</span><span style=color:#111>antinode</span><span style=color:#111>))</span>
        <span style=color:#111>{</span>
            <span style=color:#00a8c8>yield</span> <span style=color:#00a8c8>return</span> <span style=color:#111>antinode</span><span style=color:#111>;</span>
            <span style=color:#111>antinode</span> <span style=color:#111>=</span> <span style=color:#00a8c8>new</span><span style=color:#111>(</span><span style=color:#111>antinode</span><span style=color:#111>.</span><span style=color:#111>R</span> <span style=color:#111>+</span> <span style=color:#111>dr</span><span style=color:#111>,</span> <span style=color:#111>antinode</span><span style=color:#111>.</span><span style=color:#111>C</span> <span style=color:#111>+</span> <span style=color:#111>dc</span><span style=color:#111>);</span>
        <span style=color:#111>}</span>
    <span style=color:#111>}</span>
<span style=color:#111>}</span>
</code></pre></div></div><h2 id=references>References</h2><ol><li><div class=citation citation-icon-class="fas fa-fw fa-globe" cited-by-count is-main><cite id=AoC2024Day08>Day 08 - Advent of Code 2024: Resonant Collinearity<i>.</i></cite>
Eric Wastl.
<a href=https://adventofcode.com/2024/day/8 target=_blank rel=noopener><img src="https://www.google.com/s2/favicons?domain=adventofcode.com" loading=lazy aria-hidden=true width=16 height=16>
<i>adventofcode.com</i> <i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.
<i class="fas fa-fw fa-globe" aria-hidden=true></i>Accessed Aug 23, 2025.</div></li></ol></article><div style=font-size:smaller><aside id=authors-holder style="margin:0 0 2%">Cited Authors:
<a href=/cited-authors/Wastl-Eric>Wastl, Eric</a></aside><aside id=domains-holder style="margin:0 0 2%">Cited Domains:
<a href=/domains/adventofcode.com style="margin:0 2px"><img src="https://www.google.com/s2/favicons?domain=adventofcode.com" loading=lazy aria-hidden=true width=16 height=16>
adventofcode.com</a></aside></div></div><footer><a href=https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/2024/AoC2024/07-bridge-repair/07-bridge-repair/>&#171; AoC 2024 Day 07: Bridge Repair</a>
<a href=https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/2024/aoc-csharp.instructions/>LLM Instructions for Advent of Code Using C# &#187;</a></footer></section></div><footer><a href=/about>About</a>
<a href=/search>Search</a></footer></body></html>