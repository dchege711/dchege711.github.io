<!doctype html><html lang=en><head><title>AoC 2019 Day 01: The Tyranny of the Rocket Equation | curiosities.dev</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo (https://gohugo.io/)"><meta name=description content="Description  Link to challenge   The objective is to write a function that calculates the amount of fuel needed to propel a given mass. The question is interesting because the fuel has mass and therefore requires fuel too, and so forth.
My Solution use std::fs::File; use std::io::{self, BufRead}; use std::path::Path; /// Returns the amount of fuel required to launch a module of mass `mass`. fn fuel_needed_for_mass(mass: i64) -> i64 { // You can return early from a function by using the `return` keyword and  // specifying a value, but most functions return the last expression  // implicitly...."><meta property="og:title" content="AoC 2019 Day 01: The Tyranny of the Rocket Equation"><meta property="og:description" content="Description  Link to challenge   The objective is to write a function that calculates the amount of fuel needed to propel a given mass. The question is interesting because the fuel has mass and therefore requires fuel too, and so forth.
My Solution use std::fs::File; use std::io::{self, BufRead}; use std::path::Path; /// Returns the amount of fuel required to launch a module of mass `mass`. fn fuel_needed_for_mass(mass: i64) -> i64 { // You can return early from a function by using the `return` keyword and  // specifying a value, but most functions return the last expression  // implicitly...."><meta property="og:type" content="website"><meta property="og:url" content="https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/2019/01-tyranny-of-the-rocket-equation/01-tyranny-of-the-rocket-equation/"><meta property="og:site_name" content="curiosities.dev"><link rel=stylesheet type=text/css href=/css/main.min.css><link rel=preload href=/css/all_font_awesome_v5.9.min.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=/css/all_font_awesome_v5.9.min.min.css></noscript><link rel="shortcut icon" href=/img/favicon_io/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/img/favicon_io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/img/favicon_io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/img/favicon_io/favicon-16x16.png><script async type=text/javascript src=/js/OrganizeCitations.min.js></script><script async type=text/javascript src=/js/HighlightAnchor.min.js></script><script async type=text/javascript src=/js/SummaryPageUtils.min.js></script></head><body><div class=container id=main_div><form action=/search method=get id=globalSearchForm><input type=text id=q name=q title="Search Query">
<input type=submit id=submitButton value=Search></form><nav aria-label=Breadcrumb class=breadcrumb><ul><li><a href=https://www.curiosities.dev/>Home</a></li><li><a href=https://www.curiosities.dev/computer-science/>Computer Science & Software Engineering</a></li><li><a href=https://www.curiosities.dev/computer-science/programming-challenges/>Programming Challenges</a></li><li><a href=https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/>Advent of Code</a></li><li><a href=https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/2019/>Advent of Code 2019</a></li><li class=active><a href=https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/2019/01-tyranny-of-the-rocket-equation/01-tyranny-of-the-rocket-equation/>AoC 2019 Day 01: The Tyranny of the Rocket Equation</a></li></ul></nav><section><header><h1>AoC 2019 Day 01: The Tyranny of the Rocket Equation</h1><p class=meta>Dated Jan 8, 2020;
last modified on Wed, 08 Jan 2020</p></header><div id=toc-then-article><aside id=toc><nav id=TableOfContents><ul><li><a href=#description>Description</a></li><li><a href=#my-solution>My Solution</a></li></ul></nav></aside><article id=main-article><h2 id=description>Description</h2><p><a href=https://adventofcode.com/2019/day/1#part2 target=_blank rel=noopener>Link to challenge
<i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a></p><p>The objective is to write a function that calculates the amount of fuel needed to propel a given mass. The question is interesting because the fuel has mass and therefore requires fuel too, and so forth.</p><h2 id=my-solution>My Solution</h2><div><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-rust data-lang=rust><span style=color:#00a8c8>use</span> <span style=color:#111>std</span>::<span style=color:#111>fs</span>::<span style=color:#111>File</span><span style=color:#111>;</span>
<span style=color:#00a8c8>use</span> <span style=color:#111>std</span>::<span style=color:#111>io</span>::<span style=color:#111>{</span><span style=color:#111>self</span><span style=color:#111>,</span> <span style=color:#111>BufRead</span><span style=color:#111>};</span>
<span style=color:#00a8c8>use</span> <span style=color:#111>std</span>::<span style=color:#111>path</span>::<span style=color:#111>Path</span><span style=color:#111>;</span>

<span style=color:#d88200>/// Returns the amount of fuel required to launch a module of mass `mass`. 
</span><span style=color:#d88200></span><span style=color:#00a8c8>fn</span> <span style=color:#75af00>fuel_needed_for_mass</span><span style=color:#111>(</span><span style=color:#111>mass</span>: <span style=color:#00a8c8>i64</span><span style=color:#111>)</span> -&gt; <span style=color:#00a8c8>i64</span> <span style=color:#111>{</span>
    <span style=color:#75715e>// You can return early from a function by using the `return` keyword and
</span><span style=color:#75715e></span>    <span style=color:#75715e>// specifying a value, but most functions return the last expression
</span><span style=color:#75715e></span>    <span style=color:#75715e>// implicitly. Note that expressions don&#39;t have semicolons.
</span><span style=color:#75715e></span>    <span style=color:#75715e>//
</span><span style=color:#75715e></span>    <span style=color:#75715e>// https://doc.rust-lang.org/book/ch03-03-how-functions-work.html
</span><span style=color:#75715e></span>
    <span style=color:#75715e>// To find the fuel required for a module, take its mass, divide by three,
</span><span style=color:#75715e></span>    <span style=color:#75715e>// round down, and subtract 2.
</span><span style=color:#75715e></span>    <span style=color:#75715e>// 
</span><span style=color:#75715e></span>    <span style=color:#75715e>// I like how Rust warned me against using an unsigned int:
</span><span style=color:#75715e></span>    <span style=color:#75715e>// thread &#39;main&#39; panicked at &#39;attempt to subtract with overflow&#39;
</span><span style=color:#75715e></span>    <span style=color:#00a8c8>let</span> <span style=color:#111>fuel_mass</span> <span style=color:#f92672>=</span> <span style=color:#111>(</span><span style=color:#111>mass</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span><span style=color:#111>)</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>2</span><span style=color:#111>;</span>

    <span style=color:#75715e>// Can&#39;t do a one-line if-statement in Rust. Good to know.
</span><span style=color:#75715e></span>    <span style=color:#00a8c8>if</span> <span style=color:#111>fuel_mass</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span> <span style=color:#111>{</span> <span style=color:#00a8c8>return</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span> <span style=color:#111>}</span>

    <span style=color:#75715e>// The fuel also requires fuel...
</span><span style=color:#75715e></span>    <span style=color:#00a8c8>return</span> <span style=color:#111>fuel_mass</span> <span style=color:#f92672>+</span> <span style=color:#111>fuel_needed_for_mass</span><span style=color:#111>(</span><span style=color:#111>fuel_mass</span><span style=color:#111>);</span>
<span style=color:#111>}</span>

<span style=color:#00a8c8>fn</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
    <span style=color:#111>assert_eq</span><span style=color:#f92672>!</span><span style=color:#111>(</span><span style=color:#111>fuel_needed_for_mass</span><span style=color:#111>(</span><span style=color:#ae81ff>14</span><span style=color:#111>),</span> <span style=color:#ae81ff>2</span><span style=color:#111>);</span>
    <span style=color:#111>assert_eq</span><span style=color:#f92672>!</span><span style=color:#111>(</span><span style=color:#111>fuel_needed_for_mass</span><span style=color:#111>(</span><span style=color:#ae81ff>1969</span><span style=color:#111>),</span> <span style=color:#ae81ff>966</span><span style=color:#111>);</span>
    <span style=color:#111>assert_eq</span><span style=color:#f92672>!</span><span style=color:#111>(</span><span style=color:#111>fuel_needed_for_mass</span><span style=color:#111>(</span><span style=color:#ae81ff>100756</span><span style=color:#111>),</span> <span style=color:#ae81ff>50346</span><span style=color:#111>);</span>

    <span style=color:#00a8c8>let</span> <span style=color:#00a8c8>mut</span> <span style=color:#111>total_fuel_needed</span>: <span style=color:#00a8c8>i64</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#111>;</span>
    <span style=color:#75715e>// Functions return `Result` whenever errors are expected and recoverable.
</span><span style=color:#75715e></span>    <span style=color:#75715e>// `Ok(T)` represents success and contains a value, while `Err(E)`
</span><span style=color:#75715e></span>    <span style=color:#75715e>// represents an error and contains an error value.
</span><span style=color:#75715e></span>    <span style=color:#75715e>// https://doc.rust-lang.org/std/result/
</span><span style=color:#75715e></span>    <span style=color:#00a8c8>if</span> <span style=color:#00a8c8>let</span> <span style=color:#111>Ok</span><span style=color:#111>(</span><span style=color:#111>lines</span><span style=color:#111>)</span> <span style=color:#f92672>=</span> <span style=color:#111>read_lines</span><span style=color:#111>(</span><span style=color:#d88200>&#34;./input01.txt&#34;</span><span style=color:#111>)</span> <span style=color:#111>{</span>
        <span style=color:#00a8c8>for</span> <span style=color:#111>line</span> <span style=color:#00a8c8>in</span> <span style=color:#111>lines</span> <span style=color:#111>{</span>
            <span style=color:#75715e>// So much error handling. In Python, I couldn&#39;t even consider
</span><span style=color:#75715e></span>            <span style=color:#75715e>// adding this check. What could go wrong at this point?
</span><span style=color:#75715e></span>            <span style=color:#75715e>// Update: say the line is not valid UTF-8
</span><span style=color:#75715e></span>            <span style=color:#00a8c8>if</span> <span style=color:#00a8c8>let</span> <span style=color:#111>Ok</span><span style=color:#111>(</span><span style=color:#111>mass_str</span><span style=color:#111>)</span> <span style=color:#f92672>=</span> <span style=color:#111>line</span> <span style=color:#111>{</span>
                <span style=color:#00a8c8>let</span> <span style=color:#111>mass</span> <span style=color:#f92672>=</span> <span style=color:#111>mass_str</span><span style=color:#111>.</span><span style=color:#111>parse</span>::<span style=color:#f92672>&lt;</span><span style=color:#00a8c8>i64</span><span style=color:#f92672>&gt;</span><span style=color:#111>().</span><span style=color:#111>unwrap</span><span style=color:#111>();</span>
                <span style=color:#111>total_fuel_needed</span> <span style=color:#f92672>+=</span> <span style=color:#111>fuel_needed_for_mass</span><span style=color:#111>(</span><span style=color:#111>mass</span><span style=color:#111>);</span>
            <span style=color:#111>}</span>
        <span style=color:#111>}</span>
    <span style=color:#111>}</span>
    <span style=color:#75715e>// Macros look like functions, except that their name ends with
</span><span style=color:#75715e></span>    <span style=color:#75715e>// a bang !, but instead of generating a function call, macros
</span><span style=color:#75715e></span>    <span style=color:#75715e>// are expanded into source code that gets compiled with the
</span><span style=color:#75715e></span>    <span style=color:#75715e>// rest of the program.
</span><span style=color:#75715e></span>    <span style=color:#75715e>// https://doc.rust-lang.org/rust-by-example/macros.html
</span><span style=color:#75715e></span>    <span style=color:#75715e>// 
</span><span style=color:#75715e></span>    <span style=color:#75715e>// The string formatting is similar to that of Python
</span><span style=color:#75715e></span>    <span style=color:#75715e>// https://doc.rust-lang.org/std/fmt/index.html
</span><span style=color:#75715e></span>    <span style=color:#111>println</span><span style=color:#f92672>!</span><span style=color:#111>(</span><span style=color:#d88200>&#34;Total fuel needed: {}&#34;</span><span style=color:#111>,</span> <span style=color:#111>total_fuel_needed</span><span style=color:#111>);</span>
<span style=color:#111>}</span>

<span style=color:#d88200>/// Returns an `Iterator` to the `Reader` of the lines of the file. The output
</span><span style=color:#d88200>/// is wrapped in an `io::Result&lt;T&gt;` to make the failure of all I/O operations
</span><span style=color:#d88200>/// explicit.
</span><span style=color:#d88200>/// 
</span><span style=color:#d88200>/// Source: https://doc.rust-lang.org/rust-by-example/std_misc/file/read_lines.html#read_lines
</span><span style=color:#d88200></span><span style=color:#00a8c8>fn</span> <span style=color:#75af00>read_lines</span><span style=color:#f92672>&lt;</span><span style=color:#111>P</span><span style=color:#f92672>&gt;</span><span style=color:#111>(</span><span style=color:#111>filename</span>: <span style=color:#75af00>P</span><span style=color:#111>)</span> -&gt; <span style=color:#75af00>io</span>::<span style=color:#111>Result</span><span style=color:#f92672>&lt;</span><span style=color:#111>io</span>::<span style=color:#111>Lines</span><span style=color:#f92672>&lt;</span><span style=color:#111>io</span>::<span style=color:#111>BufReader</span><span style=color:#f92672>&lt;</span><span style=color:#111>File</span><span style=color:#f92672>&gt;&gt;&gt;</span>
<span style=color:#00a8c8>where</span> <span style=color:#111>P</span>: <span style=color:#111>AsRef</span><span style=color:#f92672>&lt;</span><span style=color:#111>Path</span><span style=color:#f92672>&gt;</span><span style=color:#111>,</span> <span style=color:#111>{</span>
    <span style=color:#00a8c8>let</span> <span style=color:#111>file</span> <span style=color:#f92672>=</span> <span style=color:#111>File</span>::<span style=color:#111>open</span><span style=color:#111>(</span><span style=color:#111>filename</span><span style=color:#111>)</span><span style=color:#f92672>?</span><span style=color:#111>;</span>
    <span style=color:#75715e>// From the docs: `BufReader&lt;R&gt;` can improve the speed of programs that make
</span><span style=color:#75715e></span>    <span style=color:#75715e>// small and repeated read calls to the same file. It does not help when
</span><span style=color:#75715e></span>    <span style=color:#75715e>// reading very large amounts at once, or reading just one or a few times.
</span><span style=color:#75715e></span>    <span style=color:#75715e>// It also provides no advantage when reading from a source that is already
</span><span style=color:#75715e></span>    <span style=color:#75715e>// in memory, like a `Vec&lt;u8&gt;`.
</span><span style=color:#75715e></span>    <span style=color:#111>Ok</span><span style=color:#111>(</span><span style=color:#111>io</span>::<span style=color:#111>BufReader</span>::<span style=color:#111>new</span><span style=color:#111>(</span><span style=color:#111>file</span><span style=color:#111>).</span><span style=color:#111>lines</span><span style=color:#111>())</span>
<span style=color:#111>}</span>
</code></pre></div></div></article><div style=font-size:smaller></div></div><footer><a href=https://www.curiosities.dev/computer-science/programming-challenges/advent-of-code/2019/02-1202-program-alarm/02-1202-program-alarm/>&#171; AoC 2019 Day 02: 1202 Program Alarm</a></footer></section></div><footer><a href=mailto:d.chege711@gmail.com>Email</a>
<a href=/about>About</a>
<a href=/search>Search</a></footer></body></html>