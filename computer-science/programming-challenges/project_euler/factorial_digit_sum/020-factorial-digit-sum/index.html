<!doctype html><html lang=en><head><title>020. Factorial Digit Sum | curiosities.dev</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo (https://gohugo.io/)"><meta name=description content="Problem Statement  \(n!\) means \(n \times (n - 1) \times &mldr; \times 3 \times 2 \times 1\).
For example, \(10! = 10 \times 9 \times &mldr; \times 3 \times 2 \times 1 = 3628800\), and the sum of the digits in the number \(10!\) is \(3 + 6 + 2 + 8 + 8 + 0 + 0 = 27\).
Find the sum of the digits in the number \(100!..."><link rel=stylesheet type=text/css href=/css/main.min.css><link rel=preload href=/css/all_font_awesome_v5.9.min.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=/css/all_font_awesome_v5.9.min.min.css></noscript><link rel="shortcut icon" href=/img/favicon_io/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/img/favicon_io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/img/favicon_io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/img/favicon_io/favicon-16x16.png><script async type=text/javascript src=/js/OrganizeCitations.min.js></script><script async type=text/javascript src=/js/HighlightAnchor.min.js></script><script async type=text/javascript src=/js/SummaryPageUtils.min.js></script><link rel=preload href=/css/vs.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=/css/vs.min.css></noscript><script defer type=text/javascript src=/js/highlight.min.min.js onload=addURLHighlighter();></script><script defer>const hjlsURLRegex=/https?:\/\/[^\s<]+/g
const hjlsCitationRegex=/&lt;span class=&quot;citation-ref&quot;&gt;&lt;a href=&quot;(.*)&quot;&gt;&lt;\/a&gt;&lt;\/span&gt;/g
function addURLHighlighter(){hljs.addPlugin({"after:highlight":(result)=>{result.value=result.value.replaceAll(hjlsURLRegex,"<a href='$&' target='_blank'>$&</a>");console.log(result.value);result.value=result.value.replaceAll(hjlsCitationRegex,"<span class='citation-ref'><a href='$1'></a></span>");}});hljs.highlightAll();}</script><script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body><div class=container id=main_div><form action=/search method=get id=globalSearchForm><input type=text id=q name=q title="Search Query">
<input type=submit id=submitButton value=Search></form><nav aria-label=Breadcrumb class=breadcrumb><ul><li><a href=https://www.curiosities.dev/>Home</a></li><li><a href=https://www.curiosities.dev/computer-science/>Computer Science & Software Engineering</a></li><li><a href=https://www.curiosities.dev/computer-science/programming-challenges/>Programming Challenges</a></li><li><a href=https://www.curiosities.dev/computer-science/programming-challenges/project_euler/>Project Euler</a></li><li class=active><a href=https://www.curiosities.dev/computer-science/programming-challenges/project_euler/factorial_digit_sum/020-factorial-digit-sum/>020. Factorial Digit Sum</a></li></ul></nav><section><header><h1>020. Factorial Digit Sum</h1><p class=meta>Dated Jan 15, 2022;
last modified on Sat, 15 Jan 2022</p></header><div id=toc-then-article><aside id=toc><nav id=TableOfContents><ul><li><a href=#problem-statement-span-classcitation-refa-hrefprojecteuler020aspan>Problem Statement <span class=citation-ref><a href=#ProjectEuler020></a></span></a></li><li><a href=#my-solution>My Solution</a></li><li><a href=#learning-from-others-solutions-span-classcitation-refa-hrefprojecteulerthread020aspan>Learning from Others' Solutions <span class=citation-ref><a href=#ProjectEulerThread020></a></span></a></li><li><a href=#references>References</a></li></ul></nav></aside><article id=main-article><h2 id=problem-statement-span-classcitation-refa-hrefprojecteuler020aspan>Problem Statement <span class=citation-ref><a href=#ProjectEuler020></a></span></h2><p>\(n!\) means \(n \times (n - 1) \times &mldr; \times 3 \times 2 \times
1\).</p><p>For example, \(10! = 10 \times 9 \times &mldr; \times 3 \times 2 \times 1
= 3628800\), and the sum of the digits in the number \(10!\) is \(3
+ 6 + 2 + 8 + 8 + 0 + 0 = 27\).</p><p>Find the sum of the digits in the number \(100!\)</p><h2 id=my-solution>My Solution</h2><p>It doesn&rsquo;t look like we can do without calculating the actual value of
\(100!\), and that is something that is too burdensome to compute by
hand. Programming it is!</p><p>How big is \(100!\)? Most programming languages have built-in support
for numbers less than \(2^{64} - 1\).</p><figure><img src=/img/computer-science/programming-challenges/project-euler/020-comparing-100f-with-2-to-64.jpg alt="Failed attempt at comparing \(2^{64}\) to \(100!\)"><figcaption><p><a href="https://onedrive.live.com/view.aspx?resid=D3A50A924AE586F1%214828&id=documents&wd=target%28Project%20Euler.one%7C4AFF21B6-FEDE-2540-83FB-3D9780501572%2F020.%20Factorial%20Digit%20Sum%7C03959692-0016-3048-AC6E-45D62929E872%2F%29">Failed attempt at comparing \(2^{64}\) to
\(100!\)</a></p></figcaption></figure><p>Using Stirling&rsquo;s approximation, \(\log_{k}(n!) \approx n \log_{k}(n) -
n \cdot \log_{k}(e)\), <span class=citation-ref><a href=#Inavda2019></a></span>determines that \(n!\)
starts outgrowing \(2^{n}\) when \(n \approx e \cdot k\). In
practice tend to use \(n \gg e \cdot k\), so we assume that factorials
grow faster than exponentials.</p><p>In our case, \(100 \gg 2 \cdot e\), and so the most convenient
language for this problem is one that has large integer support, e.g.
Python.</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-py data-lang=py><span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#f92672>from</span> <span style=color:#111>math</span> <span style=color:#f92672>import</span> <span style=color:#111>factorial</span>
<span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#111>s</span> <span style=color:#f92672>=</span> <span style=color:#111>f</span><span style=color:#d88200>&#34;{factorial(100)}&#34;</span>
<span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#111>sum</span><span style=color:#111>(</span><span style=color:#111>int</span><span style=color:#111>(</span><span style=color:#111>i</span><span style=color:#111>)</span> <span style=color:#00a8c8>for</span> <span style=color:#111>i</span> <span style=color:#f92672>in</span> <span style=color:#111>s</span><span style=color:#111>)</span>
<span style=color:#ae81ff>648</span>
</code></pre></div><p>But what about Lisp? I&rsquo;ve seen it enough times on Hacker News to want to
toy with it.
<a href=https://common-lisp.net/ target=_blank rel=noopener>Common-Lisp.net
<i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>seems like a
good starting point.
<a href=https://portacle.github.io/#get-mac target=_blank rel=noopener>Portacle
<i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>,
the recommended beginner-friendly way to run Lisp, does not work for me
<a href=https://github.com/portacle/portacle/issues/53 target=_blank rel=noopener>despite trying these
workarounds
<i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>. <span class=citation-ref><a href=#LispLangOrg></a></span>has some alternate instructions.</p><p><span class=tag-ref><a href=/tags/lisp>#lisp</a></span></p><p><span class=tag-ref><a href=/tags/programming-environment>#programming-environment</a></span></p><p>Common Lisp is a standard, and
<a href=http://www.sbcl.org/ target=_blank rel=noopener>Steel Bank Common Lisp
(SBCL)
<i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>is a popular Common Lisp implementation.
<a href=https://www.quicklisp.org/beta/ target=_blank rel=noopener>Quicklisp
<i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>is a package manager.
<a href=https://common-lisp.net/project/slime/ target=_blank rel=noopener>SLIME: The Superior Lisp Interaction Mode for
Emacs
<i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>is a popular Common Lisp
IDE built on Emacs. These components might not have been as apparent if
Portacle worked as expected. Furthermore, I took less time to get my
setup via this &ldquo;longer&rdquo; route.</p><div class=comment-holder><div class=comment><p>Mistakenly did <code>brew install emacs</code> instead of <code>brew install --cask emacs</code> as advocated for by
<a href=https://www.gnu.org/software/emacs/download.html target=_blank rel=noopener>GNU Emacs download - GNU
Project
<i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.
<a href=https://github.com/Homebrew/homebrew-cask target=_blank rel=noopener><code>homebrew-cask</code> extends Homebrew by installing and managing GUI macOS
applications
<i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.</p></div></div><div class=comment-holder><div class=comment><p>Emacs has an emphasis on being productive from the keyboard, e.g.
providing alternatives to using the arrow keys to avoid leaving the
touch typing position. However, I still like VS Code because of the
extensions that I have. Presumably, once I customize Emacs in a similar
way, I&rsquo;ll move into the Emacs camp and join the eternal Emacs vs. Vim
wars.
<a href="https://marketplace.visualstudio.com/items?itemName=hiro-sun.vscode-emacs" target=_blank rel=noopener>Emacs
Keymap
<i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>provides Emacs keyboard shortcuts in VS Code.</p></div></div><p><span class=citation-ref><a href=#Baggers2013></a></span>has a nice video of setting up Common Lisp,
Emacs, Slime and Quicklisp such that we can iterate on the code
efficiently. I think that&rsquo;s pretty cool. Python&rsquo;s REPL is the closest
that I&rsquo;ve come to such a development environment.</p><div><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-lisp data-lang=lisp><span style=color:#75715e>#|
</span><span style=color:#75715e>  Common Lisp objects have types, while variables do not.
</span><span style=color:#75715e>  https://lispcookbook.github.io/cl-cookbook/type.html
</span><span style=color:#75715e>|#</span>

<span style=color:#111>(</span><span style=color:#111>defun</span> <span style=color:#111>factorial</span> <span style=color:#111>(</span><span style=color:#111>n</span><span style=color:#111>)</span>
  <span style=color:#d88200>&#34;Return the factorial of n.&#34;</span>
  <span style=color:#75715e>; Return statements don&#39;t need to be explicit. The result of the last</span>
  <span style=color:#75715e>; evaluated expression is returned.</span>
  <span style=color:#111>(</span><span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#75af00>=</span> <span style=color:#111>n</span> <span style=color:#ae81ff>1</span><span style=color:#111>)</span>
      <span style=color:#111>n</span>
      <span style=color:#111>(</span><span style=color:#75af00>*</span> <span style=color:#111>n</span>
	 <span style=color:#111>(</span><span style=color:#111>factorial</span> <span style=color:#111>(</span><span style=color:#75af00>-</span> <span style=color:#111>n</span> <span style=color:#ae81ff>1</span><span style=color:#111>)))))</span>

<span style=color:#111>(</span><span style=color:#111>defun</span> <span style=color:#111>sum_of_digits</span> <span style=color:#111>(</span><span style=color:#111>n</span><span style=color:#111>)</span>
  <span style=color:#d88200>&#34;Return the sum of the digits in n.&#34;</span>
  <span style=color:#75715e>#|
</span><span style=color:#75715e>    * https://lispcookbook.github.io/cl-cookbook/strings.html
</span><span style=color:#75715e>    * https://lispcookbook.github.io/cl-cookbook/iteration.html
</span><span style=color:#75715e>  |#</span>
  <span style=color:#111>(</span><span style=color:#111>loop</span> <span style=color:#111>for</span> <span style=color:#111>c</span> <span style=color:#111>across</span> <span style=color:#111>(</span><span style=color:#75af00>write-to-string</span> <span style=color:#111>n</span><span style=color:#111>)</span>
	<span style=color:#111>sum</span> <span style=color:#111>(</span><span style=color:#75af00>parse-integer</span> <span style=color:#111>(</span><span style=color:#75af00>string</span> <span style=color:#111>c</span><span style=color:#111>))</span> <span style=color:#111>into</span> <span style=color:#111>total</span>
	<span style=color:#111>finally</span> <span style=color:#111>(</span><span style=color:#111>return</span> <span style=color:#111>total</span><span style=color:#111>)))</span>

<span style=color:#111>(</span><span style=color:#111>defun</span> <span style=color:#111>project_euler_020</span> <span style=color:#111>()</span>
  <span style=color:#d88200>&#34;Solve https://projecteuler.net/problem=20&#34;</span>
  <span style=color:#111>(</span><span style=color:#75af00>write</span> <span style=color:#111>(</span><span style=color:#111>sum_of_digits</span> <span style=color:#111>(</span><span style=color:#111>factorial</span> <span style=color:#ae81ff>100</span><span style=color:#111>))))</span>



</code></pre></div></div><p>Emacs + Slime has a steep learning curve. The keyboard bindings are
unlike anything that I frequently use. However, I think we did use
either Vim or Emacs in COS 217, because <code>C-x C-s</code> to save a file feels
familiar.</p><p>First impressions of Lisp development: the code is quite readable.
Pleasantly surprised by <code>sum (parse-integer (string c)) into total</code>.</p><h2 id=learning-from-others-solutions-span-classcitation-refa-hrefprojecteulerthread020aspan>Learning from Others' Solutions <span class=citation-ref><a href=#ProjectEulerThread020></a></span></h2><p>I could have gone without the integer to string to characters to
integers roundtrip, e.g.</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-py data-lang=py><span style=color:#00a8c8>def</span> <span style=color:#75af00>sum_of_digits</span><span style=color:#111>(</span><span style=color:#111>n</span><span style=color:#111>):</span>
    <span style=color:#111>total</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
    <span style=color:#00a8c8>while</span> <span style=color:#111>(</span><span style=color:#111>n</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span><span style=color:#111>):</span>
            <span style=color:#111>total</span> <span style=color:#f92672>+=</span> <span style=color:#111>n</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>10</span>
            <span style=color:#111>n</span> <span style=color:#f92672>=</span> <span style=color:#111>int</span><span style=color:#111>(</span><span style=color:#111>n</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>10</span><span style=color:#111>)</span>
    <span style=color:#00a8c8>return</span> <span style=color:#111>total</span>
</code></pre></div><div class=comment-holder><div class=comment><p>Ruby and Haskell seem elegant. Should try them in the next Project Euler
challenge.</p></div></div><h2 id=references>References</h2><ol><li><div class=citation citation-icon-class="fas fa-fw fa-globe" cited-by-count is-main><cite id=ProjectEuler020>#20 Factorial digit sum - Project Euler<i>.</i></cite>
<a href="https://projecteuler.net/problem=20" target=_blank rel=noopener><img src="https://www.google.com/s2/favicons?domain=projecteuler.net" loading=lazy aria-hidden=true>
<i>projecteuler.net</i> <i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.
<i class="fas fa-fw fa-globe" aria-hidden=true></i>Accessed Jan 15, 2022.</div></li><li><div class=citation citation-icon-class="fas fa-fw fa-globe" cited-by-count is-main><cite id=Inavda2019>Which function grows faster, exponential or factorial? - Stack Overflow<i>.</i></cite>
<a href=https://stackoverflow.com/a/55301991 target=_blank rel=noopener><img src="https://www.google.com/s2/favicons?domain=stackoverflow.com" loading=lazy aria-hidden=true>
<i>stackoverflow.com</i> <i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.
<i class="fas fa-fw fa-globe" aria-hidden=true></i>Accessed Jan 16, 2022.</div></li><li><div class=citation citation-icon-class="fas fa-fw fa-globe" cited-by-count is-main><cite id=LispLangOrg>Getting Started | Common Lisp<i>.</i></cite>
<a href=https://lisp-lang.org/learn/getting-started/ target=_blank rel=noopener><img src="https://www.google.com/s2/favicons?domain=lisp-lang.org" loading=lazy aria-hidden=true>
<i>lisp-lang.org</i> <i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.
<i class="fas fa-fw fa-globe" aria-hidden=true></i>Accessed Jan 16, 2022.</div></li><li><div class=citation citation-icon-class="fas fa-fw fa-globe" cited-by-count is-main><cite id=Baggers2013>Installing Common Lisp, Emacs, Slime & Quicklisp - YouTube<i>.</i></cite>
<a href="https://www.youtube.com/watch?v=VnWVu8VVDbI&t=291s" target=_blank rel=noopener><img src="https://www.google.com/s2/favicons?domain=www.youtube.com" loading=lazy aria-hidden=true>
<i>www.youtube.com</i> <i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.
<i class="fas fa-fw fa-globe" aria-hidden=true></i>Accessed Jan 16, 2022.</div></li><li><div class=citation citation-icon-class="fas fa-fw fa-globe" cited-by-count is-main><cite id=ProjectEulerThread020>Thread 20 - Project Euler<i>.</i></cite>
<a href="https://projecteuler.net/thread=20" target=_blank rel=noopener><img src="https://www.google.com/s2/favicons?domain=projecteuler.net" loading=lazy aria-hidden=true>
<i>projecteuler.net</i> <i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.
<i class="fas fa-fw fa-globe" aria-hidden=true></i>Accessed Jan 16, 2022.</div></li></ol></article><div style=font-size:smaller><aside id=tags-holder style="margin:0 0 2%">Tags:
<a href=/tags/lisp>#lisp</a>
<a href=/tags/programming-environment>#programming-environment</a></aside><aside id=domains-holder style="margin:0 0 2%">Cited Domains:
<a href=/domains/lisp-lang.org style="margin:0 2px"><img src="https://www.google.com/s2/favicons?domain=lisp-lang.org" loading=lazy aria-hidden=true>
lisp-lang.org</a>
<a href=/domains/projecteuler.net style="margin:0 2px"><img src="https://www.google.com/s2/favicons?domain=projecteuler.net" loading=lazy aria-hidden=true>
projecteuler.net</a>
<a href=/domains/stackoverflow.com style="margin:0 2px"><img src="https://www.google.com/s2/favicons?domain=stackoverflow.com" loading=lazy aria-hidden=true>
stackoverflow.com</a>
<a href=/domains/www.youtube.com style="margin:0 2px"><img src="https://www.google.com/s2/favicons?domain=www.youtube.com" loading=lazy aria-hidden=true>
www.youtube.com</a></aside></div></div><footer><a href=https://www.curiosities.dev/computer-science/programming-challenges/project_euler/counting_sundays/019-counting-sundays/>&#171; 019. Counting Sundays</a>
<a href=https://www.curiosities.dev/computer-science/programming-challenges/project_euler/amicable_numbers/021-amicable-numbers/>021. Amicable Numbers &#187;</a></footer></section></div><footer><a href=mailto:d.chege711@gmail.com>Email</a>
<a href=/about>About</a>
<a href=/search>Search</a></footer></body></html>