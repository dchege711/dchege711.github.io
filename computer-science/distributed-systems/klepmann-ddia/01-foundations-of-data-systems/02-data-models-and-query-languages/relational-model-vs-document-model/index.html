<!doctype html><html lang=en><head><title>Relational Model Versus Document Model | curiosities.dev</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo (https://gohugo.io/)"><meta name=description content="A relational data model uses tables that consist of rows and columns. A row can be uniquely identified by a table + ID combination. A column entry can reference another row in another table through a shared key. One goal is to avoid duplicating data. However, to answer a real-world query, we end up paying th cost by joining results from multiple tables. That said, with proper indexing and prior research, combining results is pretty fast...."><meta property="og:title" content="Relational Model Versus Document Model"><meta property="og:description" content="A relational data model uses tables that consist of rows and columns. A row can be uniquely identified by a table + ID combination. A column entry can reference another row in another table through a shared key. One goal is to avoid duplicating data. However, to answer a real-world query, we end up paying th cost by joining results from multiple tables. That said, with proper indexing and prior research, combining results is pretty fast...."><meta property="og:type" content="website"><meta property="og:url" content="https://www.curiosities.dev/computer-science/distributed-systems/klepmann-ddia/01-foundations-of-data-systems/02-data-models-and-query-languages/relational-model-vs-document-model/"><meta property="og:site_name" content="curiosities.dev"><link rel=stylesheet type=text/css href=/css/main.min.css><link rel=preload href=/css/all_font_awesome_v5.9.min.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=/css/all_font_awesome_v5.9.min.min.css></noscript><link rel="shortcut icon" href=/img/favicon_io/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/img/favicon_io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/img/favicon_io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/img/favicon_io/favicon-16x16.png><script async type=text/javascript src=/js/OrganizeCitations.min.js></script><script async type=text/javascript src=/js/HighlightAnchor.min.js></script><script async type=text/javascript src=/js/SummaryPageUtils.min.js></script><link rel=preload href=/css/vs.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=/css/vs.min.css></noscript><script defer type=text/javascript src=/js/highlight.min.min.js onload=addURLHighlighter();></script><script defer>const hjlsURLRegex=/https?:\/\/[^\s<]+/g
const hjlsCitationRegex=/&lt;span class=&quot;citation-ref&quot;&gt;&lt;a href=&quot;(.*)&quot;&gt;&lt;\/a&gt;&lt;\/span&gt;/g
function addURLHighlighter(){hljs.addPlugin({"after:highlight":(result)=>{result.value=result.value.replaceAll(hjlsURLRegex,"<a href='$&' target='_blank'>$&</a>");console.log(result.value);result.value=result.value.replaceAll(hjlsCitationRegex,"<span class='citation-ref'><a href='$1'></a></span>");}});hljs.highlightAll();}</script></head><body><div class=container id=main_div><form action=/search method=get id=globalSearchForm><input type=text id=q name=q title="Search Query">
<input type=submit id=submitButton value=Search></form><nav aria-label=Breadcrumb class=breadcrumb><ul><li><a href=https://www.curiosities.dev/>Home</a></li><li><a href=https://www.curiosities.dev/computer-science/>Computer Science & Software Engineering</a></li><li><a href=https://www.curiosities.dev/computer-science/distributed-systems/>Distributed Systems</a></li><li><a href=https://www.curiosities.dev/computer-science/distributed-systems/klepmann-ddia/>Designing Data-Intensive Applications [Book]</a></li><li><a href=https://www.curiosities.dev/computer-science/distributed-systems/klepmann-ddia/01-foundations-of-data-systems/>Foundations of Data Systems</a></li><li><a href=https://www.curiosities.dev/computer-science/distributed-systems/klepmann-ddia/01-foundations-of-data-systems/02-data-models-and-query-languages/>Data Models and Query Languages</a></li><li class=active><a href=https://www.curiosities.dev/computer-science/distributed-systems/klepmann-ddia/01-foundations-of-data-systems/02-data-models-and-query-languages/relational-model-vs-document-model/>Relational Model Versus Document Model</a></li></ul></nav><section><header><h1>Relational Model Versus Document Model</h1><p class=meta>Dated May 28, 2023;
last modified on Sat, 19 Jul 2025</p></header><div id=toc-then-article><aside id=toc><nav id=TableOfContents><ul><li><a href=#relational-model-versus-document-model>Relational Model Versus Document Model</a></li><li><a href=#are-document-databases-repeating-history>Are Document Databases Repeating History?</a></li><li><a href=#relational-versus-document-databases-today>Relational Versus Document Databases Today</a></li><li><a href=#references>References</a></li></ul></nav></aside><article id=main-article><div class=priors-holder><div class=priors><p>A relational data model uses tables that consist of rows and columns. A row can
be uniquely identified by a table + ID combination. A column entry can reference
another row in another table through a shared key. One goal is to avoid
duplicating data. However, to answer a real-world query, we end up paying th
cost by joining results from multiple tables. That said, with proper indexing
and prior research, combining results is pretty fast.</p><p>A document model is more like a one-stop shop for individual queries. Good
locality for single-entity queries, but we pay the cost when fetching
population-level answers. Document models got lumped in with no-schema data
models, but not sure if they&rsquo;re equivalent; to an approximation, is a document
model one big table? Either way, no-schema data models have flexibility at the
cost of no preprocessing; might lead to scaling issues.</p></div></div><div class=comment-holder><div class=comment><p>Funny that I used the terms &ldquo;table&rdquo;, &ldquo;row&rdquo;, and &ldquo;column&rdquo;, which happen to be
SQL-specific terms. The relational data model, from which SQL is the most
popular version, organizes the data into <strong>relations</strong>, where each relation is
an unordered collection of <strong>tuples.</strong>
<a href="https://www.youtube.com/watch?v=rRi8LptvFZY" target=_blank rel=noopener>Velcro
moment
<i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.</p></div></div><h2 id=relational-model-versus-document-model>Relational Model Versus Document Model</h2><p>How can a résumé be represented in a relational schema? The profile was a whole
can be identified by a unique identifier, <code>user_id</code>. Fields like <code>first_name</code>
and <code>last_name</code> appear exactly once per user, so they can be modeled as columns
on the <code>users</code> table. However, most people have had more than one job in their
career, varying numbers of periods of education, and any number of pieces of
contact information. The one-to-many relationship between a user and these items
can be represented in various ways:</p><ul><li>Put <code>positions</code>, <code>education</code>, and <code>contact_info</code> in separate tables, with a
foreign key reference to the <code>users</code> table.</li><li>In later versions of SQL, multi-valued data can be stored within a single row,
with support for querying and indexing, e.g., as <code>XML</code> or <code>JSON</code> data-types.</li><li>Encode <code>positions</code>, <code>education</code> and <code>contact_info</code> as JSON or XML, and store
it on a <code>TEXT</code> column in the database. However, one can&rsquo;t query the DB for
values inside the encoded column.</li></ul><p><span class=citation-ref><a href=#Kleppmann2017-Ch2></a></span></p><div class=comment-holder><div class=comment><p>I had the following schema:</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sql data-lang=sql><span style=color:#00a8c8>CREATE</span> <span style=color:#00a8c8>TABLE</span> <span style=color:#111>users</span> <span style=color:#111>(</span><span style=color:#111>user_id</span> <span style=color:#111>integer</span> <span style=color:#00a8c8>PRIMARY</span> <span style=color:#00a8c8>KEY</span><span style=color:#111>,</span> <span style=color:#111>first_name</span> <span style=color:#111>text</span><span style=color:#111>,</span> <span style=color:#111>last_name</span> <span style=color:#111>text</span><span style=color:#111>,</span> <span style=color:#111>summary</span> <span style=color:#111>text</span><span style=color:#111>);</span>
<span style=color:#00a8c8>CREATE</span> <span style=color:#00a8c8>TABLE</span> <span style=color:#111>positions</span> <span style=color:#111>(</span><span style=color:#111>position_id</span> <span style=color:#111>integer</span> <span style=color:#00a8c8>PRIMARY</span> <span style=color:#00a8c8>KEY</span><span style=color:#111>,</span> <span style=color:#111>title</span> <span style=color:#111>text</span><span style=color:#111>,</span> <span style=color:#111>company</span> <span style=color:#111>text</span><span style=color:#111>);</span>
<span style=color:#00a8c8>CREATE</span> <span style=color:#00a8c8>TABLE</span> <span style=color:#111>user_positions</span> <span style=color:#111>(</span><span style=color:#111>user_id</span> <span style=color:#111>integer</span> <span style=color:#00a8c8>REFERENCES</span> <span style=color:#111>users</span><span style=color:#111>,</span> <span style=color:#111>position_id</span> <span style=color:#111>integer</span> <span style=color:#00a8c8>REFERENCES</span> <span style=color:#111>positions</span><span style=color:#111>,</span> <span style=color:#111>start_date</span> <span style=color:#111>date</span><span style=color:#111>,</span> <span style=color:#00a8c8>end</span> <span style=color:#111>date</span><span style=color:#111>);</span>
<span style=color:#00a8c8>CREATE</span> <span style=color:#00a8c8>TABLE</span> <span style=color:#111>institutions</span> <span style=color:#111>(</span><span style=color:#111>institution_id</span> <span style=color:#111>integer</span> <span style=color:#00a8c8>PRIMARY</span> <span style=color:#00a8c8>KEY</span><span style=color:#111>,</span> <span style=color:#111>instution_name</span> <span style=color:#111>text</span><span style=color:#111>,</span> <span style=color:#111>degree</span> <span style=color:#111>text</span><span style=color:#111>);</span>
<span style=color:#00a8c8>CREATE</span> <span style=color:#00a8c8>TABLE</span> <span style=color:#111>user_institution</span> <span style=color:#111>(</span><span style=color:#111>user_id</span> <span style=color:#111>integer</span> <span style=color:#00a8c8>REFERENCES</span> <span style=color:#111>users</span><span style=color:#111>,</span> <span style=color:#111>institution_id</span> <span style=color:#00a8c8>REFERENCES</span> <span style=color:#111>institutions</span><span style=color:#111>,</span> <span style=color:#00a8c8>start</span> <span style=color:#111>date</span><span style=color:#111>,</span> <span style=color:#00a8c8>end</span> <span style=color:#111>date</span><span style=color:#111>);</span>
<span style=color:#00a8c8>CREATE</span> <span style=color:#00a8c8>TABLE</span> <span style=color:#111>contact_info</span> <span style=color:#111>(</span><span style=color:#111>user_id</span> <span style=color:#111>integer</span> <span style=color:#00a8c8>REFERENCES</span> <span style=color:#111>users</span><span style=color:#111>,</span> <span style=color:#111>info</span> <span style=color:#111>text</span><span style=color:#111>);</span>
</code></pre></div><p>But it feels as if it can be split further, e.g., <code>institutions.degree</code>, can be
extracted out further with degrees being their own entities.</p><p>Also didn&rsquo;t know that later versions of SQL support queryable and indexable
multi-value data in a column. Seems like SQL and NoSQL are converging?</p></div></div><p>For a data structure like a résumé, which is mostly a self-contained <em>document</em>,
a JSON representation can be appropriate, e.g.,</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-json data-lang=json><span style=color:#111>{</span>
  <span style=color:#f92672>&#34;user_id&#34;</span><span style=color:#111>:</span> <span style=color:#ae81ff>251</span><span style=color:#111>,</span>
  <span style=color:#f92672>&#34;first_name&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Bill&#34;</span><span style=color:#111>,</span>
  <span style=color:#f92672>&#34;last_name&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Gates&#34;</span><span style=color:#111>,</span>
  <span style=color:#f92672>&#34;summary&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Co-chair of the Bill &amp; Melinda Gates... Active blogger.&#34;</span><span style=color:#111>,</span>
  <span style=color:#f92672>&#34;region_id&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;us:91&#34;</span><span style=color:#111>,</span>
  <span style=color:#f92672>&#34;industry_id&#34;</span><span style=color:#111>:</span> <span style=color:#ae81ff>131</span><span style=color:#111>,</span>
  <span style=color:#f92672>&#34;photo_url&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;/p/7/000/253/05b/308dd6e.jpg&#34;</span><span style=color:#111>,</span>
  <span style=color:#f92672>&#34;positions&#34;</span><span style=color:#111>:</span> <span style=color:#111>[</span>
    <span style=color:#111>{</span><span style=color:#f92672>&#34;job_title&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Co-chair&#34;</span><span style=color:#111>,</span> <span style=color:#f92672>&#34;organization&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Bill &amp; Melinda Gates Foundation&#34;</span><span style=color:#111>},</span>
    <span style=color:#111>{</span><span style=color:#f92672>&#34;job_title&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Co-founder, Chairman&#34;</span><span style=color:#111>,</span> <span style=color:#f92672>&#34;organization&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Microsoft&#34;</span><span style=color:#111>}</span>
  <span style=color:#111>],</span>
  <span style=color:#f92672>&#34;education&#34;</span><span style=color:#111>:</span> <span style=color:#111>[</span>
    <span style=color:#111>{</span><span style=color:#f92672>&#34;school_name&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Harvard University&#34;</span><span style=color:#111>,</span> <span style=color:#f92672>&#34;start&#34;</span><span style=color:#111>:</span> <span style=color:#ae81ff>1973</span><span style=color:#111>,</span> <span style=color:#f92672>&#34;end&#34;</span><span style=color:#111>:</span> <span style=color:#ae81ff>1975</span><span style=color:#111>},</span>
    <span style=color:#111>{</span><span style=color:#f92672>&#34;school_name&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Lakeside School, Seattle&#34;</span><span style=color:#111>,</span> <span style=color:#f92672>&#34;start&#34;</span><span style=color:#111>:</span> <span style=color:#00a8c8>null</span><span style=color:#111>,</span> <span style=color:#f92672>&#34;end&#34;</span><span style=color:#111>:</span> <span style=color:#00a8c8>null</span><span style=color:#111>}</span>
  <span style=color:#111>],</span>
  <span style=color:#f92672>&#34;contact_info&#34;</span><span style=color:#111>:</span> <span style=color:#111>{</span>
    <span style=color:#f92672>&#34;blog&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;http://thegatesnotes.com&#34;</span><span style=color:#111>,</span>
    <span style=color:#f92672>&#34;twitter&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;http://twitter.com/BillGates&#34;</span>
  <span style=color:#111>}</span>
<span style=color:#111>}</span>
</code></pre></div><p>&mldr; with properties such as:</p><ul><li>Lower impedance mismatch between the application code and the storage layer.</li><li>Locality: all the info in one place, and one query is sufficient.</li><li>The one-to-many relationships' tree structure is explicit.</li></ul><p><span class=citation-ref><a href=#Kleppmann2017-Ch2></a></span></p><p>The use of IDs such as <code>us:91</code> and <code>131</code> over free text such as <code>Greater Seattle Area</code> and <code>Philanthropy</code> enables:</p><ul><li>Consistent style and spelling across profiles.</li><li>Avoids ambiguity, e.g., several cities with the same name.</li><li>Ease of updating, e.g., city changes its name.</li><li>Standardized list can be localized into user&rsquo;s language.</li><li>Better search, e.g., encoding that <code>Geater Seattle Area</code> is in <code>Washington</code>.</li></ul><p><span class=citation-ref><a href=#Kleppmann2017-Ch2></a></span></p><p>Anything that is meaningful to humans may need to change sometime in the future,
but the ID, which has no meaning to humans, can stay the same. If information
that is meaningful to humans changes, and that information is duplicated, all
redundant copies need to updated (write overheads) lest the data becomes
inconsistent. Removing such duplication is the key idea behind <strong>normalization</strong>
in databases. <span class=citation-ref><a href=#Kleppmann2017-Ch2></a></span></p><h2 id=are-document-databases-repeating-history>Are Document Databases Repeating History?</h2><p>The <strong>network (CODASYL) model</strong> of the 1970s had it such that a record could
have multiple parents. To access a record, one would need to follow an <strong>access
path</strong> from the root record along chains of links (and keep track of the
traversal because different paths can lead to the same record). The code for
querying and updating the database was complicated and inflexible. <span class=citation-ref><a href=#Kleppmann2017-Ch2></a></span></p><div class=comment-holder><div class=comment><p><a href=https://kellercenter.princeton.edu/courses/technology-and-society target=_blank rel=noopener>EGR 277
<i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>might have had something to say about relational databases winning out over
network databases, especially how the resurgence of document databases partially
vindicates network databases.</p></div></div><div class=flashcard><div class=flashcard-link-holder id=card-647584086c4ede00338eed52><a href="https://cards.c13u.com/browse/?cardID=647584086c4ede00338eed52" title="Flashcard: How did relational databases improve usability compared to the network (CODASYL) databases in the 1970s?" target=_blank><span aria-hidden=true>📑</span></a></div><p>By contrast, the relational model lay all the data in the open. The <strong>query
optimizer</strong> automatically decides which parts of the query to execute and in
what order, and which indexes to use, effectively creating an access path which
was abstracted away from the application developer. The application developer
need not update their queries to take advantage of new indexes. Granted, query
optimizers are complicated beasts with many years of R&D, all applications that
use a database can benefit from its query optimizer. <span class=citation-ref><a href=#Kleppmann2017-Ch2></a></span></p></div><p><span class=tag-ref><a href=/tags/databases>#databases</a></span></p><p><span class=tag-ref><a href=/tags/innovation>#innovation</a></span></p><div class=comment-holder><div class=comment><p>Another complicated beast that consumes a lot of R&D is a programming language&rsquo;s
compiler, which comes with lots of optimizations that allow application
developers to write relatively simple code.</p><p>In an ideal case, the abstraction is airtight, but the abstraction may leak
leading to complexity in the application code. For example, some SQL servers may
be dramatically faster for <code>WHERE a=b AND b=c AND a=c</code> than for <code>WHERE a=b AND b=c</code>. <span class=citation-ref><a href=#Spolsky2002></a></span></p></div></div><div class=flashcard><div class=flashcard-link-holder id=card-6475840c6c4ede00338eed5c><a href="https://cards.c13u.com/browse/?cardID=6475840c6c4ede00338eed5c" title="Flashcard: Compare and contrast how document DBs and relational DBs handle many-to-X relationships within records" target=_blank><span aria-hidden=true>📑</span></a></div><p>Document databases reverted back to the hierarchical model by storing
one-to-many relationships within the parent record. For many-to-one and
many-to-many relationships:</p><ul><li>Document databases use a <strong>document reference</strong> in the document model, and
resolve it at read time using follow-up queries.</li><li>Relational databases use a <strong>foreign key</strong> in the relational model, and
resolve it at read time using a join.</li></ul><p><span class=citation-ref><a href=#Kleppmann2017-Ch2></a></span></p><p><span class=tag-ref><a href=/tags/databases>#databases</a></span></p></div><h2 id=relational-versus-document-databases-today>Relational Versus Document Databases Today</h2><p>If the data has a document-like structure, splitting it into multiple tables
can lead to cumbersome schemas and unnecessarily complicated application code.
That said, data has a tendency of becoming more interconnected as features are added
to applications. <span class=citation-ref><a href=#Kleppmann2017-Ch2></a></span></p><p>Some references cannot be made directly in a document model, e.g., &ldquo;the second
item in the list of positions for user <code>251</code>,&rdquo; but as long as the documents are
not too deeply nested, this is not usually a problem. <span class=citation-ref><a href=#Kleppmann2017-Ch2></a></span></p><div class=flashcard><div class=flashcard-link-holder id=card-6475840d6c4ede00338eed63><a href="https://cards.c13u.com/browse/?cardID=6475840d6c4ede00338eed63" title="Flashcard: What is the best model for data with many many-to-X relationships?" target=_blank><span aria-hidden=true>📑</span></a></div><p>If there are many-to-many relationships, the document model becomes less
appealing because of the work needed to keep denormalized data consistent, and
the slower emulations of joins, which could have been handled by more
specialized code in a relational model. For highly interconnected data, the
graph model is even better than a relational one. <span class=citation-ref><a href=#Kleppmann2017-Ch2></a></span></p><p><span class=tag-ref><a href=/tags/databases>#databases</a></span></p></div><div class=flashcard><div class=flashcard-link-holder id=card-6475840e6c4ede00338eed6a><a href="https://cards.c13u.com/browse/?cardID=6475840e6c4ede00338eed6a" title="Flashcard: Why are 'schema-on-write' and 'schema-on-read' more accurate than 'schema-less'?" target=_blank><span aria-hidden=true>📑</span></a></div><p>While document databases are called <strong>schema-less,</strong> they are more of
<strong>schema-on-read</strong> because the structure of the data does get interpreted when
read. Contrast this with relational databases that have <strong>schema-on-write</strong>
which is explicit and enforced by the database. The difference is poignant when
changing the format of its data, e.g.,</p><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=color:#00a8c8>if</span> <span style=color:#111>(</span><span style=color:#75af00>user</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#75af00>user</span><span style=color:#111>.</span><span style=color:#75af00>name</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>!</span><span style=color:#75af00>user</span><span style=color:#111>.</span><span style=color:#75af00>first_name</span><span style=color:#111>)</span> <span style=color:#111>{</span>
  <span style=color:#75715e>// Documents written before Dec 8, 2013 don&#39;t have `first_name`.
</span><span style=color:#75715e></span>  <span style=color:#75af00>user</span><span style=color:#111>.</span><span style=color:#75af00>first_name</span> <span style=color:#f92672>=</span> <span style=color:#75af00>user</span><span style=color:#111>.</span><span style=color:#75af00>name</span><span style=color:#111>.</span><span style=color:#75af00>split</span><span style=color:#111>(</span><span style=color:#d88200>&#34; &#34;</span><span style=color:#111>)[</span><span style=color:#ae81ff>0</span><span style=color:#111>];</span>
<span style=color:#111>}</span>
</code></pre></div><div class=highlight><pre style=color:#272822;background-color:#fafafa;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sql data-lang=sql><span style=color:#75715e>-- Perform a migration that adds first_name
</span><span style=color:#75715e></span><span style=color:#00a8c8>ALTER</span> <span style=color:#00a8c8>TABLE</span> <span style=color:#111>users</span> <span style=color:#00a8c8>ADD</span> <span style=color:#00a8c8>COLUMN</span> <span style=color:#111>first_name</span> <span style=color:#111>text</span><span style=color:#111>;</span>
<span style=color:#00a8c8>UPDATE</span> <span style=color:#111>users</span> <span style=color:#00a8c8>SET</span> <span style=color:#111>first_name</span> <span style=color:#f92672>=</span> <span style=color:#111>split_part</span><span style=color:#111>(</span><span style=color:#111>name</span><span style=color:#111>,</span> <span style=color:#d88200>&#39; &#39;</span><span style=color:#111>,</span> <span style=color:#ae81ff>1</span><span style=color:#111>);</span>
</code></pre></div><p><span class=tag-ref><a href=/tags/databases>#databases</a></span></p></div><p>&mldr; and some tradeoffs may arise. For example, MySQL&rsquo;s <code>ALTER TABLE</code> copies the
entire table, which may mean hours of downtime for very large tables. <code>UPDATE</code>
on a large table is slow on any database, but can be mitigated by setting a
default of <code>NULL</code> and filling it at read time, like it would in a document
database. Schema-on-read is also advantageous when there are many different
types of objects, or the structure of data is determined by external systems
that you don&rsquo;t control. <span class=citation-ref><a href=#Kleppmann2017-Ch2></a></span></p><div class=comment-holder><div class=comment><p>MySQL&rsquo;s <code>ALTER TABLE</code> is still pretty slow, prompting workarounds by
<a href=https://docs.percona.com/percona-toolkit/pt-online-schema-change.html target=_blank rel=noopener>Percona
<i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>,
<a href=https://github.com/soundcloud/lhm target=_blank rel=noopener>Soundcloud
<i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>,
<a href=https://github.blog/2016-08-01-gh-ost-github-s-online-migration-tool-for-mysql/ target=_blank rel=noopener>Github
<i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>,
<a href=https://engineering.fb.com/2017/05/05/production-engineering/onlineschemachange-rebuilt-in-python/ target=_blank rel=noopener>Facebook
<i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>,
<a href=http://shlomi-noach.github.io/openarkkit/oak-online-alter-table.html target=_blank rel=noopener>Open
Ark
<i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>, etc.
<span class=citation-ref><a href=#SOMySQLSlowAlterTable></a></span></p></div></div><div class=flashcard><div class=flashcard-link-holder id=card-64757e061d3c360032ee0745><a href="https://cards.c13u.com/browse/?cardID=64757e061d3c360032ee0745" title="Flashcard: What are the tradeoffs in the data locality for a document database?" target=_blank><span aria-hidden=true>📑</span></a></div><p>If large parts of the document are needed at the same time, then the document
model has a data locality advantage. However, updates to a document (especially
those that change its size) may need a full rewrite of the document, with
significant perf implications. Some relational databases do group related data
together for locality, e.g., Google&rsquo;s Spanner database. <span class=citation-ref><a href=#Kleppmann2017-Ch2></a></span></p><p><span class=tag-ref><a href=/tags/databases>#databases</a></span></p><p><span class=tag-ref><a href=/tags/locality>#locality</a></span></p></div><h2 id=references>References</h2><ol><li><div class=citation citation-icon-class cited-by-count is-main><cite id=Kleppmann2017-Ch2>Designing Data-Intensive Applications: The big ideas behind reliable, scalable, and maintainable systems<i>.</i>
Chapter 2: Data Models and Query Languages<i>.</i></cite>
Kleppmann, Martin.
Mar 16, 2017.</div></li><li><div class=citation citation-icon-class="fas fa-fw fa-globe" cited-by-count is-main><cite id=Spolsky2002>The Law of Leaky Abstraction<i>.</i></cite>
Joel Spolsky.
<a href=https://www.joelonsoftware.com/2002/11/11/the-law-of-leaky-abstractions/ target=_blank rel=noopener><img src="https://www.google.com/s2/favicons?domain=www.joelonsoftware.com" loading=lazy aria-hidden=true width=16 height=16>
<i>www.joelonsoftware.com</i> <i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.
<a href=https://en.wikipedia.org/wiki/Leaky_abstraction target=_blank rel=noopener><img src="https://www.google.com/s2/favicons?domain=en.wikipedia.org" loading=lazy aria-hidden=true width=16 height=16>
<i>en.wikipedia.org</i> <i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.
<i class="fas fa-fw fa-globe" aria-hidden=true></i>Accessed May 28, 2023.</div></li><li><div class=citation citation-icon-class="fas fa-fw fa-globe" cited-by-count is-main><cite id=SOMySQLSlowAlterTable>sql - MySQL very slow for alter table query<i>.</i></cite>
<a href=https://stackoverflow.com/a/12774774/7812406 target=_blank rel=noopener><img src="https://www.google.com/s2/favicons?domain=stackoverflow.com" loading=lazy aria-hidden=true width=16 height=16>
<i>stackoverflow.com</i> <i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.
<i class="fas fa-fw fa-globe" aria-hidden=true></i>Accessed May 28, 2023.</div></li></ol></article><div style=font-size:smaller><aside id=tags-holder style="margin:0 0 2%">Tags:
<a href=/tags/databases>#databases</a>
<a href=/tags/innovation>#innovation</a>
<a href=/tags/locality>#locality</a></aside><aside id=authors-holder style="margin:0 0 2%">Cited Authors:
<a href=/cited-authors/Kleppmann-Martin>Kleppmann, Martin</a>
<a href=/cited-authors/Spolsky-Joel>Spolsky, Joel</a></aside><aside id=domains-holder style="margin:0 0 2%">Cited Domains:
<a href=/domains/en.wikipedia.org style="margin:0 2px"><img src="https://www.google.com/s2/favicons?domain=en.wikipedia.org" loading=lazy aria-hidden=true width=16 height=16>
en.wikipedia.org</a>
<a href=/domains/stackoverflow.com style="margin:0 2px"><img src="https://www.google.com/s2/favicons?domain=stackoverflow.com" loading=lazy aria-hidden=true width=16 height=16>
stackoverflow.com</a>
<a href=/domains/www.joelonsoftware.com style="margin:0 2px"><img src="https://www.google.com/s2/favicons?domain=www.joelonsoftware.com" loading=lazy aria-hidden=true width=16 height=16>
www.joelonsoftware.com</a></aside></div></div><footer><a href=https://www.curiosities.dev/computer-science/distributed-systems/klepmann-ddia/01-foundations-of-data-systems/02-data-models-and-query-languages/query-languages-for-data/>Query Languages for Data &#187;</a></footer></section></div><footer><a href=/about>About</a>
<a href=/search>Search</a></footer></body></html>