<!doctype html><html lang=en><head><title>On Distributed Systems | curiosities.dev</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo (https://gohugo.io/)"><meta name=description content="Mergeable Replicated Data Types  On a distributed system, each replica should [eventually] converge to the same state. Commutative Replicated Data Types (CRDTs) can accept updates and achieve consistent without remote synchronization.
The Need for Commutativity Say we have a queue \( 1 \to 2 \). Suppose two replicas, \(r_1\) and \(r_2\), independently call pop(). Each replica will have \(2\) on their queue.
However, on receiving an update that the other replica popped, each replica will call pop() to be consistent, thereby deleting \(2\)...."><meta property="og:title" content="On Distributed Systems"><meta property="og:description" content="Mergeable Replicated Data Types  On a distributed system, each replica should [eventually] converge to the same state. Commutative Replicated Data Types (CRDTs) can accept updates and achieve consistent without remote synchronization.
The Need for Commutativity Say we have a queue \( 1 \to 2 \). Suppose two replicas, \(r_1\) and \(r_2\), independently call pop(). Each replica will have \(2\) on their queue.
However, on receiving an update that the other replica popped, each replica will call pop() to be consistent, thereby deleting \(2\)...."><meta property="og:type" content="website"><meta property="og:url" content="https://www.curiosities.dev/computer-science/2020-05-17-distributed-systems/"><meta property="og:site_name" content="curiosities.dev"><link rel=stylesheet type=text/css href=/css/main.min.css><link rel=preload href=/css/all_font_awesome_v5.9.min.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=/css/all_font_awesome_v5.9.min.min.css></noscript><link rel="shortcut icon" href=/img/favicon_io/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/img/favicon_io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/img/favicon_io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/img/favicon_io/favicon-16x16.png><script async type=text/javascript src=/js/OrganizeCitations.min.js></script><script async type=text/javascript src=/js/HighlightAnchor.min.js></script><script async type=text/javascript src=/js/SummaryPageUtils.min.js></script><link rel=preload href=/css/vs.min.css as=style onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel=stylesheet href=/css/vs.min.css></noscript><script defer type=text/javascript src=/js/highlight.min.min.js onload=addURLHighlighter();></script><script defer>const hjlsURLRegex=/https?:\/\/[^\s<]+/g
const hjlsCitationRegex=/&lt;span class=&quot;citation-ref&quot;&gt;&lt;a href=&quot;(.*)&quot;&gt;&lt;\/a&gt;&lt;\/span&gt;/g
function addURLHighlighter(){hljs.addPlugin({"after:highlight":(result)=>{result.value=result.value.replaceAll(hjlsURLRegex,"<a href='$&' target='_blank'>$&</a>");console.log(result.value);result.value=result.value.replaceAll(hjlsCitationRegex,"<span class='citation-ref'><a href='$1'></a></span>");}});hljs.highlightAll();}</script><script type=text/javascript async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script></head><body><div class=container id=main_div><form action=/search method=get id=globalSearchForm><input type=text id=q name=q title="Search Query">
<input type=submit id=submitButton value=Search></form><nav aria-label=Breadcrumb class=breadcrumb><ul><li><a href=https://www.curiosities.dev/>Home</a></li><li><a href=https://www.curiosities.dev/computer-science/>Computer Science & Software Engineering</a></li><li class=active><a href=https://www.curiosities.dev/computer-science/2020-05-17-distributed-systems/>On Distributed Systems</a></li></ul></nav><section><header><h1>On Distributed Systems</h1><p class=meta>Dated May 17, 2020;
last modified on Mon, 05 Sep 2022</p></header><div id=toc-then-article><aside id=toc><nav id=TableOfContents><ul><li><a href=#mergeable-replicated-data-types-span-classcitation-refa-hrefkaki2019aspan>Mergeable Replicated Data Types <span class=citation-ref><a href=#Kaki2019></a></span></a><ul><li><a href=#the-need-for-commutativity>The Need for Commutativity</a></li><li><a href=#3-way-merge-for-the-set-data-structure>3-Way Merge for the Set Data Structure</a></li><li><a href=#extending-the-set-merge-formula>Extending the Set Merge Formula</a></li><li><a href=#remarks-on-mrdts>Remarks on MRDTs</a></li></ul></li><li><a href=#references>References</a></li></ul></nav></aside><article id=main-article><h2 id=mergeable-replicated-data-types-span-classcitation-refa-hrefkaki2019aspan>Mergeable Replicated Data Types <span class=citation-ref><a href=#Kaki2019></a></span></h2><p>On a distributed system, each replica should [eventually] converge to the same state. Commutative Replicated Data Types (CRDTs) can accept updates and achieve consistent without remote synchronization.</p><h3 id=the-need-for-commutativity>The Need for Commutativity</h3><p>Say we have a queue \( 1 \to 2 \). Suppose two replicas, \(r_1\) and \(r_2\), independently call <code>pop()</code>. Each replica will have \(2\) on their queue.</p><p>However, on receiving an update that the other replica popped, each replica will call <code>pop()</code> to be consistent, thereby deleting \(2\).</p><p>MRDTs extend the CRDT idea to support non-commutative operations.</p><h3 id=3-way-merge-for-the-set-data-structure>3-Way Merge for the Set Data Structure</h3><ul><li>Suppose we start with \(s_{LCA} = \{1, 2, 3\} \)</li><li>At replica 1, we pop \(3\) to have \( s_1 = \{1, 2\} \)</li><li>At replica 2, we pop \(1\) and add \(4\), to have \( s_2 = \{2, 3, 4\} \)</li><li>Notice that the intent is to remove \(3\), remove \(1\) and add \(4\) to the set. The merge logic is:</li></ul><p>$$ = (s_{LCA} \cap s_1 \cap s_2 ) \cup (s_1 - s_{LCA}) \cup (s_2 - s_{LCA}) $$
$$ = (\{1, 2, 3\} \cap \{1, 2\} \cap \{2, 3, 4\}) \cup ( \{1, 2\} - \{1, 2, 3\} ) \cup ( \{2, 3, 4\} - \{1, 2, 3\}) ) $$
$$ = \{2\} \cup \{ \varnothing \} \cup \{ 4 \} $$
$$ = \{2, 4\} $$</p><div class=comment-holder><div class=comment><p>The catch is that we need to send more information over the network. We need the least common ancestor, and diffs in order to recreate the inputs to the merge formula.</p></div></div><h3 id=extending-the-set-merge-formula>Extending the Set Merge Formula</h3><p>The 3-way merge for set data structures extends to any data structure that can be expressed in the set domain.</p><p>For example, a list \(v = [1, 2, 3]\) can be represented in set domain as two relations:</p><p>$$ R_{membership}(v) = \{ 1, 2, 3 \} $$
$$ R_{occurs-before}(v) = \{ (1, 2), (1, 3), (2, 3) \} $$</p><h3 id=remarks-on-mrdts>Remarks on MRDTs</h3><p>Because the merge formula ignores the operations themselves, it won&rsquo;t work if the operations need pre-conditions to be met before executing.</p><h2 id=references>References</h2><ol><li><div class=citation citation-icon-class="fas fa-fw fa-globe" cited-by-count is-main><cite id=Kaki2019>Mergeable Replicated Data Types<i>.</i></cite>
Gowtham Kaki; Swarn Priya; KC Sivaramakrishnan; Suresh Jagannathan.
<a href=https://kcsrk.info/papers/oopsla19-mrdt.pdf target=_blank rel=noopener><img src="https://www.google.com/s2/favicons?domain=kcsrk.info" loading=lazy aria-hidden=true width=16 height=16>
<i>kcsrk.info</i> <i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.
<a href=http://muratbuffalo.blogspot.com/2020/05/mergeable-replicated-data-types.html target=_blank rel=noopener><img src="https://www.google.com/s2/favicons?domain=muratbuffalo.blogspot.com" loading=lazy aria-hidden=true width=16 height=16>
<i>muratbuffalo.blogspot.com</i> <i class="fas fa-fw fa-external-link-alt" aria-hidden=true></i></a>.
Oct 10, 2019.
<i class="fas fa-fw fa-globe" aria-hidden=true></i></div></li></ol></article><div style=font-size:smaller><aside id=tags-holder style="margin:0 0 2%">Tags:
<a href=/tags/computer-science>#computer-science</a>
<a href=/tags/software-engineering>#software-engineering</a></aside><aside id=authors-holder style="margin:0 0 2%">Cited Authors:
<a href=/cited-authors/Jagannathan-Suresh>Jagannathan, Suresh</a>
<a href=/cited-authors/Kaki-Gowtham>Kaki, Gowtham</a>
<a href=/cited-authors/Priya-Swarn>Priya, Swarn</a>
<a href=/cited-authors/Sivaramakrishnan-KC>Sivaramakrishnan, KC</a></aside><aside id=domains-holder style="margin:0 0 2%">Cited Domains:
<a href=/domains/kcsrk.info style="margin:0 2px"><img src="https://www.google.com/s2/favicons?domain=kcsrk.info" loading=lazy aria-hidden=true width=16 height=16>
kcsrk.info</a>
<a href=/domains/muratbuffalo.blogspot.com style="margin:0 2px"><img src="https://www.google.com/s2/favicons?domain=muratbuffalo.blogspot.com" loading=lazy aria-hidden=true width=16 height=16>
muratbuffalo.blogspot.com</a></aside></div></div><footer><a href=https://www.curiosities.dev/computer-science/2020-11-14-software-dependencies/>&#171; Software Dependencies</a>
<a href=https://www.curiosities.dev/computer-science/2021-01-03-information-retrieval-medley/>Information Retrieval Medley &#187;</a></footer></section></div><footer><a href=mailto:d.chege711@gmail.com>Email</a>
<a href=/about>About</a>
<a href=/search>Search</a></footer></body></html>