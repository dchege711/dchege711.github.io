window.addEventListener("load",organizeCitations);window.addEventListener("load",inlineDefinitions);function organizeCitations(){const citationElements=document.getElementsByTagName("cite");if(!citationElements||citationElements.length===0)return;for(let i=0;i<citationElements.length;i++){const citationHolder=citationElements[i].parentElement;if(!citationHolder)continue;const listItem=citationHolder.parentElement;if(!listItem||listItem.tagName.toLowerCase()!=="li")continue;const listElement=listItem.parentElement;if(!listElement)continue;listElement.style.fontSize="smaller";}
let citationIDToDetails={};for(let i=0;i<citationElements.length;i++){let citationElement=citationElements[i];if(citationElement.parentElement&&citationElement.parentElement.parentElement.tagName.toLowerCase()==="li"){citationElement.parentElement.style.fontSize="inherit";}
const citationIconClass=citationElement.parentElement.getAttribute("citation-icon-class");const citedByCount=citationElement.parentElement.getAttribute("cited-by-count");citationIDToDetails[citationElement.id]={hoverText:citationElement.parentElement.innerText,iconHTML:(citationIconClass?`<i class="${citationIconClass}" style="margin-left:3px; margin-right:3px;" aria-hidden="true"></i>`:""),citationRefIds:[],citedByCountHTML:(citedByCount?`<sup>${citedByCount}</sup>`:""),isMain:citationElement.parentElement.getAttribute("is-main")==="true",};}
let incompleteAnchors=document.querySelectorAll("span > a");for(let i=0;i<incompleteAnchors.length;i++){let anchor=incompleteAnchors[i];let citationID=anchor.href.split("#")[1];if(citationIDToDetails[citationID]){anchor.innerHTML=`${citationID}${citationIDToDetails[citationID].iconHTML}${citationIDToDetails[citationID].citedByCountHTML}`;anchor.title=citationIDToDetails[citationID].hoverText;anchor.parentElement.classList.add("citation-ref-processed");const citationRefId=`citation-ref-${i}`;anchor.parentElement.id=citationRefId;citationIDToDetails[citationID].citationRefIds.push(citationRefId);}}
for(let i=0;i<citationElements.length;i++){const citationElement=citationElements[i];for(let citationRefId of citationIDToDetails[citationElement.id].citationRefIds){let citationRefElem=document.createElement("a");citationRefElem.href=`#${citationRefId}`;citationRefElem.innerText=citationIDToDetails[citationElement.id].isMain?"⋁":"^";citationRefElem.title=`Jump up to ${citationRefId}`;citationRefElem.classList.add("citation-ref-backlink");citationElement.parentElement.insertAdjacentElement("beforeend",citationRefElem);}}}
function inlineDefinitions(){const descListElements=document.getElementsByTagName("dl");if(!descListElements||descListElements.length===0)return;const termIDToDefinitionText={};for(let i=0;i<descListElements.length;i++){const elem=descListElements[i];let termID=elem.getElementsByTagName("dt")[0].id;let definitionText=elem.innerText;termIDToDefinitionText[termID]=definitionText;}
for(const[termID,definitionText]of Object.entries(termIDToDefinitionText)){const matchingAnchorElements=document.querySelectorAll(`a[href="#${termID}"]`);for(let i=0;i<matchingAnchorElements.length;i++){matchingAnchorElements[i].title=definitionText;}}}